# ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹å£²è²·ã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜æ›¸

**ä½œæˆæ—¥**: 2025å¹´1æœˆ4æ—¥  
**æœ€çµ‚æ›´æ–°**: 2025å¹´9æœˆ18æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v3.0  
**å¯¾è±¡ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**: llm_analysisï¼ˆãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹å£²è²·ã‚·ã‚¹ãƒ†ãƒ ã«æ‹¡å¼µï¼‰  
**ç›®çš„**: ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ä¸­å¿ƒã®å£²è²·ã‚·ãƒŠãƒªã‚ªç”Ÿæˆãƒ»è©•ä¾¡ãƒ»æ”¹å–„ã‚·ã‚¹ãƒ†ãƒ ã®å®Œå…¨ä»•æ§˜

---

## ğŸ“‹ ç›®æ¬¡

1. [ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦](#1-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦)
2. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ](#2-ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ)
3. [æ©Ÿèƒ½ä»•æ§˜](#3-æ©Ÿèƒ½ä»•æ§˜)
4. [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼](#4-ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼)
5. [APIä»•æ§˜](#5-apiä»•æ§˜)
6. [è¨­å®šä»•æ§˜](#6-è¨­å®šä»•æ§˜)
7. [å®Ÿè£…è¨ˆç”»](#7-å®Ÿè£…è¨ˆç”»)
8. [å“è³ªè¦ä»¶](#8-å“è³ªè¦ä»¶)

---

## 1. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦

### 1.1 ç›®çš„
æ—¢å­˜ã®`llm_analysis`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ‹¡å¼µã—ã€ç¾åœ¨ã®å¸‚å ´ãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«ã€ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã§å£²è²·ã‚·ãƒŠãƒªã‚ªã‚’ç”Ÿæˆã—ã€Yahoo Finance APIã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ã‚’è¡Œã„ã€Discordé…ä¿¡ã§å£²è²·ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’æä¾›ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã€‚LLMã¯åˆ†æã‚’è¡Œã‚ãšã€è¨€èªåŒ–ãƒ»æ—¥èªŒãƒ»æ”¹å–„ææ¡ˆã«é™å®šã€‚OANDAã®èªè¨¼å•é¡Œã‚’å›é¿ã—ã€Yahoo Finance APIã‚’ä½¿ç”¨ã—ã¦ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚

### 1.2 ä¸»è¦æ©Ÿèƒ½
- **Yahoo Finance APIé€£æº**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»å£²è²·ã‚¿ã‚¤ãƒŸãƒ³ã‚°é€šçŸ¥ï¼ˆèªè¨¼ä¸è¦ï¼‰
- **ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹åˆ¤å®š**: æ•°å€¤ãƒ™ãƒ¼ã‚¹ã®å³æ ¼ãªå£²è²·æ¡ä»¶åˆ¤å®š
- **éšå±¤çš„ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æ**: å¤§å±€ï¼ˆD1ãƒ»H4ï¼‰â†’æˆ¦è¡“ï¼ˆH1ï¼‰â†’åŸ·è¡Œï¼ˆM5ï¼‰ã®3æ®µéšåˆ†æ
- **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ãƒ‡ãƒ¼ã‚¿åé›†å®Œäº†æ™‚ã®è‡ªå‹•ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æå®Ÿè¡Œ
- **ã‚¹ãƒŠãƒƒãƒ—ä¿å­˜**: ã‚¨ãƒ³ãƒˆãƒªãƒ¼/ã‚¨ã‚°ã‚¸ãƒƒãƒˆæ™‚ç‚¹ã®ç›¸å ´ç’°å¢ƒè¨˜éŒ²
- **ãƒ«ãƒ¼ãƒ«éµå®ˆåˆ¤å®š**: 100ç‚¹æº€ç‚¹ã§ã®ãƒˆãƒ¬ãƒ¼ãƒ‰è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 
- **ã‚·ãƒŠãƒªã‚ªç®¡ç†**: æˆ¦ç•¥â†’ã‚·ãƒŠãƒªã‚ªâ†’ãƒˆãƒ¬ãƒ¼ãƒ‰ã®éšå±¤æ§‹é€ 
- **Discordé…ä¿¡**: æ§‹é€ åŒ–ã•ã‚ŒãŸå£²è²·é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–**: ç¶™ç¶šçš„ç›£è¦–ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚‹ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ã®å¯è¦–åŒ–
- **æ—¥æ¬¡è©•ä¾¡ãƒ»æ”¹å–„**: ãƒ­ãƒ¼ãƒªãƒ³ã‚°æ¤œè¨¼ã«ã‚ˆã‚‹ãƒ«ãƒ¼ãƒ«æ”¹è¨‚

### 1.3 é‹ç”¨æ–¹é‡
1. **ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ä¸­å¿ƒ**: æ•°å€¤åˆ¤å®šã¯ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã€LLMã¯è£œåŠ©çš„å½¹å‰²
2. **ãƒãƒ¼ãƒ‰åˆ¶ç´„**: 1%/trade, 3%/day, ä¿æœ‰30â€“240åˆ†, blackoutå³å®ˆ
3. **ãƒˆãƒ¬ãƒ¼ãƒ‰è¨˜éŒ²**: å…¨ãƒˆãƒ¬ãƒ¼ãƒ‰ã®ã‚¹ãƒŠãƒƒãƒ—ä¿å­˜ãƒ»è©•ä¾¡
4. **æ—¥æ¬¡æ”¹å–„**: ãƒ«ãƒ¼ãƒ«éµå®ˆåˆ¤å®šã«åŸºã¥ãç¶™ç¶šçš„æ”¹å–„
5. **å®‰å…¨è¨­è¨ˆ**: ä¸‹ä½åˆ†ä½ï¼ˆdaily_score_p05ï¼‰ã®æœ€å¤§åŒ–

### 1.4 LLMã®å½¹å‰²ï¼ˆé™å®šï¼‰
**LLMã¯ä»¥ä¸‹ã®3ã¤ã®å½¹å‰²ã«é™å®š**ï¼š
- **è¨€èªåŒ–**: æ•°å€¤ãƒ‡ãƒ¼ã‚¿ã‚’äººé–“ãŒç†è§£ã—ã‚„ã™ã„æ–‡ç« ã«å¤‰æ›
- **æ—¥èªŒ**: ãƒˆãƒ¬ãƒ¼ãƒ‰å±¥æ­´ã®è‡ªç„¶è¨€èªã§ã®è¨˜éŒ²ãƒ»è¦ç´„
- **æ”¹å–„ææ¡ˆ**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æçµæœã«åŸºã¥ãæ”¹å–„æ¡ˆã®æç¤º

**LLMã¯è¡Œã‚ãªã„**ï¼š
- ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆãƒ»å£²è²·åˆ¤å®š
- æ•°å€¤æœ€é©åŒ–ãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´
- å¸‚å ´åˆ†æãƒ»äºˆæ¸¬

### 1.5 å¯¾è±¡å¸‚å ´
- **é€šè²¨ãƒšã‚¢**: USD/JPY
- **æ™‚é–“è¶³**: 5m, 15m, 1h, 4h, 1d
- **åˆ†æé »åº¦**: 5åˆ†é–“éš”ï¼ˆM5è¶³ãƒ™ãƒ¼ã‚¹ï¼‰
- **ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«**: æ•°æ™‚é–“ã§å®Œçµã€1æ—¥3ã€œ5å›ç¨‹åº¦

### 1.6 ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³
- âœ… **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ãƒ‡ãƒ¼ã‚¿åé›†å®Œäº†æ™‚ã«è‡ªå‹•ã§ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æã‚’å®Ÿè¡Œ
- âœ… **éšå±¤çš„ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æ**: D1/H4ï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰ã€H1ï¼ˆã‚¾ãƒ¼ãƒ³ï¼‰ã€M5ï¼ˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼‰ã®3æ®µéšåˆ†æ
- âœ… **ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹å£²è²·ã‚·ã‚¹ãƒ†ãƒ **: 5ã¤ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ«ãƒ¼ãƒ«ã«ã‚ˆã‚‹è‡ªå‹•ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ
- âœ… **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–**: ç¶™ç¶šçš„ç›£è¦–ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚‹ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ã®å¯è¦–åŒ–
- âœ… **Discordé€šçŸ¥**: ã‚·ãƒŠãƒªã‚ªä½œæˆã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼/ã‚¨ã‚°ã‚¸ãƒƒãƒˆã‚·ã‚°ãƒŠãƒ«ã®è‡ªå‹•é€šçŸ¥
- âœ… **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«**: ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚·ã‚¹ãƒ†ãƒ ã®æ°¸ç¶šåŒ–
- âœ… **ç¶™ç¶šçš„ãƒ‡ãƒ¼ã‚¿åé›†**: 5åˆ†é–“éš”ã§ã®è‡ªå‹•ãƒ‡ãƒ¼ã‚¿åé›†ã¨ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ

---

## 2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### 2.1 ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹é€ 
```
modules/llm_analysis/              # æ—¢å­˜ãƒ•ã‚©ãƒ«ãƒ€ã‚’æ‹¡å¼µ
â”œâ”€â”€ core/                          # ã‚³ã‚¢æ©Ÿèƒ½
â”‚   â”œâ”€â”€ data_preparator.py         # ãƒ‡ãƒ¼ã‚¿æº–å‚™å™¨ï¼ˆâœ…å®Œæˆæ¸ˆã¿ï¼‰
â”‚   â”œâ”€â”€ technical_calculator.py    # ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—å™¨ï¼ˆâœ…å®Œæˆæ¸ˆã¿ï¼‰
â”‚   â”œâ”€â”€ technical_analysis_service.py # ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æã‚µãƒ¼ãƒ“ã‚¹ï¼ˆâœ…å®Œæˆæ¸ˆã¿ï¼‰
â”‚   â”œâ”€â”€ rule_engine.py             # ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹åˆ¤å®šã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆâœ…å®Œæˆæ¸ˆã¿ï¼‰
â”‚   â”œâ”€â”€ scenario_manager.py        # ã‚·ãƒŠãƒªã‚ªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆâœ…å®Œæˆæ¸ˆã¿ï¼‰
â”‚   â””â”€â”€ snapshot_manager.py        # ã‚¹ãƒŠãƒƒãƒ—ä¿å­˜ã‚·ã‚¹ãƒ†ãƒ ï¼ˆâœ…å®Œæˆæ¸ˆã¿ï¼‰
â”œâ”€â”€ providers/                     # å¤–éƒ¨APIé€£æº
â”‚   â”œâ”€â”€ yahoo_finance_stream_client.py  # Yahoo Finance Stream APIï¼ˆâœ…å®Œæˆæ¸ˆã¿ï¼‰
â”‚   â”œâ”€â”€ oanda_stream_client.py     # OANDA Stream APIï¼ˆå°†æ¥ç”¨ï¼‰
â”‚   â””â”€â”€ base_provider.py           # å…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆâœ…å®Œæˆæ¸ˆã¿ï¼‰
â”œâ”€â”€ services/                      # ã‚µãƒ¼ãƒ“ã‚¹å±¤ï¼ˆâœ…å®Œæˆæ¸ˆã¿ï¼‰
â”‚   â””â”€â”€ analysis_service.py        # åˆ†æã‚µãƒ¼ãƒ“ã‚¹
â”œâ”€â”€ evaluation/                    # è©•ä¾¡ãƒ»æ”¹å–„ã‚·ã‚¹ãƒ†ãƒ ï¼ˆâœ…å®Œæˆæ¸ˆã¿ï¼‰
â”‚   â”œâ”€â”€ adherence_evaluator.py     # ãƒ«ãƒ¼ãƒ«éµå®ˆåˆ¤å®š
â”‚   â”œâ”€â”€ daily_evaluator.py         # æ—¥æ¬¡è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â””â”€â”€ rule_improver.py           # ãƒ«ãƒ¼ãƒ«æ”¹å–„ã‚¨ãƒ³ã‚¸ãƒ³
â”œâ”€â”€ llm/                          # LLMè£œåŠ©æ©Ÿèƒ½ï¼ˆé™å®šãƒ»æ–°è¦è¿½åŠ ï¼‰
â”‚   â”œâ”€â”€ language_processor.py      # è¨€èªåŒ–å‡¦ç†
â”‚   â”œâ”€â”€ journal_generator.py       # æ—¥èªŒç”Ÿæˆ
â”‚   â””â”€â”€ improvement_advisor.py     # æ”¹å–„ææ¡ˆ
â”œâ”€â”€ notification/                  # é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ï¼ˆâœ…å®Œæˆæ¸ˆã¿ï¼‰
â”‚   â”œâ”€â”€ discord_notifier.py        # Discordé…ä¿¡
â”‚   â””â”€â”€ message_formatter.py       # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
â”œâ”€â”€ orchestration/                 # ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆâœ…å®Œæˆæ¸ˆã¿ï¼‰
â”‚   â””â”€â”€ trading_pipeline.py        # å£²è²·ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
â”œâ”€â”€ config/                        # è¨­å®šç®¡ç†
â”‚   â”œâ”€â”€ trading_config.yaml        # å£²è²·è¨­å®šï¼ˆæ–°è¦è¿½åŠ ï¼‰
â”‚   â”œâ”€â”€ rules.yaml                 # ãƒ«ãƒ¼ãƒ«å®šç¾©ï¼ˆâœ…å®Œæˆæ¸ˆã¿ï¼‰
â”‚   â””â”€â”€ risk_constraints.yaml      # ãƒªã‚¹ã‚¯åˆ¶ç´„ï¼ˆæ–°è¦è¿½åŠ ï¼‰
â””â”€â”€ tests/                         # ãƒ†ã‚¹ãƒˆ
    â”œâ”€â”€ test_technical_calculator.py  # âœ…å®Œæˆæ¸ˆã¿
    â”œâ”€â”€ test_technical_values.py      # âœ…å®Œæˆæ¸ˆã¿
    â”œâ”€â”€ test_rule_engine.py          # æ–°è¦è¿½åŠ 
    â”œâ”€â”€ test_scenario_manager.py     # æ–°è¦è¿½åŠ 
    â”œâ”€â”€ test_adherence_evaluator.py  # æ–°è¦è¿½åŠ 
    â””â”€â”€ test_oanda_integration.py    # æ–°è¦è¿½åŠ 
```

### 2.2 ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### 2.2.1 ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹åˆ¤å®šã‚¨ãƒ³ã‚¸ãƒ³ (RuleEngine)
```python
class RuleBasedEngine:
    """ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹åˆ¤å®šã‚¨ãƒ³ã‚¸ãƒ³"""
    
    def evaluate_entry_conditions(self, data: Dict) -> Dict:
        """ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ¡ä»¶ã®è©•ä¾¡"""
    
    def evaluate_exit_conditions(self, trade: Dict) -> Dict:
        """ã‚¨ã‚°ã‚¸ãƒƒãƒˆæ¡ä»¶ã®è©•ä¾¡"""
    
    def check_risk_constraints(self, scenario: Dict) -> bool:
        """ãƒªã‚¹ã‚¯åˆ¶ç´„ã®ãƒã‚§ãƒƒã‚¯"""
```

#### 2.2.2 ã‚·ãƒŠãƒªã‚ªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  (ScenarioManager)
```python
class ScenarioManager:
    """ã‚·ãƒŠãƒªã‚ªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ """
    
    def create_scenario(self, strategy: str, conditions: Dict) -> Dict:
        """ã‚·ãƒŠãƒªã‚ªã®ä½œæˆ"""
    
    def update_scenario_status(self, scenario_id: str, status: str) -> None:
        """ã‚·ãƒŠãƒªã‚ªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ›´æ–°"""
    
    def get_active_scenarios(self) -> List[Dict]:
        """ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚·ãƒŠãƒªã‚ªã®å–å¾—"""
```

#### 2.2.3 ã‚¹ãƒŠãƒƒãƒ—ä¿å­˜ã‚·ã‚¹ãƒ†ãƒ  (SnapshotManager)
```python
class SnapshotManager:
    """ã‚¹ãƒŠãƒƒãƒ—ä¿å­˜ã‚·ã‚¹ãƒ†ãƒ """
    
    def save_entry_snapshot(self, trade: Dict) -> str:
        """ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¹ãƒŠãƒƒãƒ—ã®ä¿å­˜"""
    
    def save_exit_snapshot(self, trade_id: str, exit_data: Dict) -> None:
        """ã‚¨ã‚°ã‚¸ãƒƒãƒˆã‚¹ãƒŠãƒƒãƒ—ã®ä¿å­˜"""
    
    def get_trade_history(self, days: int) -> List[Dict]:
        """ãƒˆãƒ¬ãƒ¼ãƒ‰å±¥æ­´ã®å–å¾—"""
```

#### 2.2.4 Yahoo Finance Stream APIé€£æº (YahooFinanceStreamClient)
```python
class YahooFinanceStreamClient:
    """Yahoo Finance Stream APIé€£æºï¼ˆèªè¨¼ä¸è¦è¨­è¨ˆï¼‰"""
    
    async def start_price_stream(self, instruments: List[str]) -> None:
        """ä¾¡æ ¼ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®é–‹å§‹"""
    
    async def get_current_price(self, instrument: str) -> PriceData:
        """ç¾åœ¨ä¾¡æ ¼ã®å–å¾—"""
    
    def add_callback(self, stream_type: StreamType, callback: Callable) -> None:
        """ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®è¿½åŠ """
```

---

## 3. æ©Ÿèƒ½ä»•æ§˜

### 3.1 Stage 1: ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»æº–å‚™

#### 3.1.1 Yahoo Finance Stream APIé€£æº
```python
# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿å–å¾—
{
    "instrument": "USD_JPY",
    "time": "2025-01-04T10:30:00.000000000Z",
    "bid": 146.123,
    "ask": 146.125,
    "status": "tradeable",
    "spread": 0.002,
    "mid_price": 146.124
}

# ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
@dataclass
class PriceData:
    instrument: str
    time: datetime
    bid: float
    ask: float
    status: str
    spread: float
    mid_price: float
```

#### 3.1.2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€£æº
- TimescaleDBã‹ã‚‰è¤‡æ•°æ™‚é–“è¶³ã®ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
- ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ã®è¨ˆç®—ï¼ˆTA-Lib + ãƒ•ã‚£ãƒœãƒŠãƒƒãƒï¼‰
- ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯ã¨å‰å‡¦ç†

### 3.2 Stage 2: ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹åˆ¤å®š

#### 3.2.1 ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ¡ä»¶ãƒ«ãƒ¼ãƒ«ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ï¼‰
```yaml
# ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ«ãƒ¼ãƒ«ï¼ˆæ®µéšçš„å°å…¥ï¼‰
active_rules:
  - name: "pullback_buy"
    enabled: true
    conditions:
      - "RSI_14 <= 40"                    # æŠ¼ã—ç›®æ¡ä»¶
      - "price > EMA_200"                 # ãƒˆãƒ¬ãƒ³ãƒ‰æ–¹å‘
      - "MACD > MACD_Signal"              # ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ 
      - "price BETWEEN Fib_0.382 AND Fib_0.618"  # ãƒ•ã‚£ãƒœãƒŠãƒƒãƒ
      - "active_session = Tokyo OR London"       # ã‚»ãƒƒã‚·ãƒ§ãƒ³
      - "daily_trades < 5"                       # ãƒªã‚¹ã‚¯åˆ¶ç´„
      - "daily_risk < 3%"
  
  - name: "breakout_buy"
    enabled: false  # Week 2ã§æœ‰åŠ¹åŒ–
    conditions:
      - "price > EMA_21"
      - "RSI_14 > 50"
      - "MACD > 0"
      - "price > Fib_1.272"
      - "Volume_Ratio > 1.5"
      - "active_session = London OR NewYork"
      - "daily_trades < 5"
      - "daily_risk < 3%"
  
  - name: "reversal_sell"
    enabled: false  # Week 3ã§æœ‰åŠ¹åŒ–
    conditions:
      - "RSI_14 >= 70"
      - "price < EMA_200"
      - "MACD < MACD_Signal"
      - "price BETWEEN Fib_0.618 AND Fib_0.786"
      - "active_session = Tokyo OR London"
      - "daily_trades < 5"
      - "daily_risk < 3%"
```

#### 3.2.2 ã‚¨ã‚°ã‚¸ãƒƒãƒˆæ¡ä»¶ãƒ«ãƒ¼ãƒ«
```yaml
exit_rules:
  profit_targets:
    tp1: "price >= entry_price + (ATR * 1.5)"
    tp2: "price >= entry_price + (ATR * 2.5)"
    tp3: "price >= entry_price + (ATR * 4.0)"
    
  stop_loss:
    sl: "price <= entry_price - (ATR * 1.0)"
    
  time_based:
    max_hold_time: "hold_time >= 240 minutes"
    min_hold_time: "hold_time >= 30 minutes"
    
  trailing_stop:
    trailing_activation: "profit >= ATR * 1.0"
    trailing_distance: "ATR * 0.8"
```

### 3.3 Stage 3: ã‚·ãƒŠãƒªã‚ªç®¡ç†

#### 3.3.1 ã‚·ãƒŠãƒªã‚ªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«
```
planned â†’ armed(ç›£è¦–) â†’ triggered(æ¡ä»¶æˆç«‹) â†’ entered(ç´„å®š) â†’ exited/canceled/expired
```

#### 3.3.2 ã‚·ãƒŠãƒªã‚ªæ§‹é€ 
```python
scenario = {
    "id": "scenario_001",
    "strategy": "pullback_buy",  # æŠ¼ã—ç›®è²·ã„
    "status": "armed",
    "conditions": {
        "entry": {...},
        "exit": {...},
        "risk": {...}
    },
    "created_at": "2025-01-04T10:00:00Z",
    "expires_at": "2025-01-04T18:00:00Z",
    "trades": []  # å®Ÿéš›ã®ç´„å®šå±¥æ­´
}
```

### 3.4 Stage 4: ã‚¹ãƒŠãƒƒãƒ—ä¿å­˜

#### 3.4.1 ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¹ãƒŠãƒƒãƒ—
```python
entry_snapshot = {
    "trade_id": "trade_001",
    "scenario_id": "scenario_001",
    "timestamp": "2025-01-04T10:30:00Z",
    "price_data": {
        "entry_price": 146.124,
        "bid": 146.123,
        "ask": 146.125
    },
    "technical_indicators": {
        "RSI_14": 38.5,
        "MACD": 0.0012,
        "EMA_21": 146.100,
        "EMA_200": 145.800,
        "ATR_14": 0.45
    },
    "fibonacci_levels": {
        "Fib_0.382": 146.050,
        "Fib_0.5": 146.000,
        "Fib_0.618": 145.950
    },
    "session_info": {
        "session": "Tokyo",
        "time_remaining": 180  # åˆ†
    },
    "risk_metrics": {
        "position_size": 1000,
        "risk_percent": 0.8,
        "daily_risk": 1.2
    }
}
```

#### 3.4.2 ã‚¨ã‚°ã‚¸ãƒƒãƒˆã‚¹ãƒŠãƒƒãƒ—
```python
exit_snapshot = {
    "trade_id": "trade_001",
    "exit_timestamp": "2025-01-04T12:15:00Z",
    "exit_price": 146.250,
    "exit_reason": "tp1_hit",
    "hold_time_minutes": 105,
    "profit_loss": 126,  # pips
    "profit_loss_percent": 0.86,
    "technical_indicators": {...},  # ã‚¨ã‚°ã‚¸ãƒƒãƒˆæ™‚ç‚¹ã®æŒ‡æ¨™
    "adherence_score": 95  # ãƒ«ãƒ¼ãƒ«éµå®ˆã‚¹ã‚³ã‚¢
}
```

### 3.5 Stage 5: ãƒ«ãƒ¼ãƒ«éµå®ˆåˆ¤å®š

#### 3.5.1 è©•ä¾¡é …ç›®ï¼ˆ100ç‚¹æº€ç‚¹ï¼‰
```python
adherence_evaluation = {
    "sma_200_direction": {
        "weight": 20,
        "score": 20,  # æº€ç‚¹
        "violation": None
    },
    "rsi_threshold": {
        "weight": 20,
        "score": 15,  # 5ç‚¹æ¸›ç‚¹
        "violation": "rsi_was_42_not_40"
    },
    "macd_conditions": {
        "weight": 20,
        "score": 20,  # æº€ç‚¹
        "violation": None
    },
    "fibonacci_zone": {
        "weight": 20,
        "score": 20,  # æº€ç‚¹
        "violation": None
    },
    "risk_management": {
        "weight": 20,
        "score": 18,  # 2ç‚¹æ¸›ç‚¹
        "violation": "hold_time_105min_vs_120min_target"
    },
    "total_score": 93,
    "violation_tags": ["rsi_threshold", "hold_time"]
}
```

#### 3.5.2 ä¹–é›¢ã‚¿ã‚°
```python
violation_tags = [
    "early_entry",      # æ—©æœŸã‚¨ãƒ³ãƒˆãƒªãƒ¼
    "late_entry",       # é…å»¶ã‚¨ãƒ³ãƒˆãƒªãƒ¼
    "trend_violation",  # ãƒˆãƒ¬ãƒ³ãƒ‰é•å
    "rule_conflict_sl", # ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ãƒ«ãƒ¼ãƒ«é•å
    "over_hold_time",   # ä¿æœ‰æ™‚é–“è¶…é
    "news_blackout",    # ãƒ‹ãƒ¥ãƒ¼ã‚¹æœŸé–“ä¸­
    "correlation_risk", # ç›¸é–¢ãƒªã‚¹ã‚¯è¶…é
    "daily_limit"       # æ—¥æ¬¡åˆ¶é™è¶…é
]
```

### 3.6 Stage 6: LLMè£œåŠ©æ©Ÿèƒ½ï¼ˆé™å®šï¼‰

#### 3.6.1 è¨€èªåŒ–å‡¦ç†
```python
class LanguageProcessor:
    """æ•°å€¤ãƒ‡ãƒ¼ã‚¿ã®è¨€èªåŒ–å‡¦ç†"""
    
    def describe_trade_snapshot(self, snapshot: Dict) -> str:
        """ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚¹ãƒŠãƒƒãƒ—ã®è¨€èªåŒ–"""
        return f"""
        ã‚¨ãƒ³ãƒˆãƒªãƒ¼ä¾¡æ ¼: {snapshot['entry_price']}ã§{snapshot['direction']}ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã€‚
        RSI: {snapshot['rsi']}ã€MACD: {snapshot['macd']}ã€EMA200: {snapshot['ema_200']}ã€‚
        ãƒ•ã‚£ãƒœãƒŠãƒƒãƒãƒ¬ãƒ™ãƒ«: {snapshot['fibonacci_position']}ã€‚
        ã‚»ãƒƒã‚·ãƒ§ãƒ³: {snapshot['session']}ã€ãƒªã‚¹ã‚¯: {snapshot['risk_percent']}%ã€‚
        """
    
    def describe_performance(self, metrics: Dict) -> str:
        """ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™ã®è¨€èªåŒ–"""
        return f"""
        æœ¬æ—¥ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: å‹ç‡{metrics['win_rate']}%ã€ç·åˆ©ç›Š{metrics['total_profit']}pipsã€‚
        æœ€å¤§ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³: {metrics['max_drawdown']}%ã€ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ª: {metrics['sharpe_ratio']}ã€‚
        ãƒ«ãƒ¼ãƒ«éµå®ˆã‚¹ã‚³ã‚¢: {metrics['adherence_score']}/100ã€‚
        """
```

#### 3.6.2 æ—¥èªŒç”Ÿæˆ
```python
class JournalGenerator:
    """ãƒˆãƒ¬ãƒ¼ãƒ‰æ—¥èªŒã®ç”Ÿæˆ"""
    
    def generate_daily_journal(self, trades: List[Dict]) -> str:
        """æ—¥æ¬¡ãƒˆãƒ¬ãƒ¼ãƒ‰æ—¥èªŒã®ç”Ÿæˆ"""
        return f"""
        ã€{datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')} ãƒˆãƒ¬ãƒ¼ãƒ‰æ—¥èªŒã€‘
        
        ç·ãƒˆãƒ¬ãƒ¼ãƒ‰æ•°: {len(trades)}ä»¶
        æˆåŠŸãƒˆãƒ¬ãƒ¼ãƒ‰: {len([t for t in trades if t['profit'] > 0])}ä»¶
        å¤±æ•—ãƒˆãƒ¬ãƒ¼ãƒ‰: {len([t for t in trades if t['profit'] <= 0])}ä»¶
        
        ä¸»è¦ãªãƒˆãƒ¬ãƒ¼ãƒ‰:
        {self._format_trade_summaries(trades)}
        
        ä»Šæ—¥ã®å­¦ã³:
        {self._generate_insights(trades)}
        """
    
    def generate_rule_performance_journal(self, rule_performance: Dict) -> str:
        """ãƒ«ãƒ¼ãƒ«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ—¥èªŒã®ç”Ÿæˆ"""
        return f"""
        ã€ãƒ«ãƒ¼ãƒ«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æã€‘
        
        æŠ¼ã—ç›®è²·ã„ãƒ«ãƒ¼ãƒ«: å‹ç‡{rule_performance['pullback_buy']['win_rate']}%
        ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆè²·ã„ãƒ«ãƒ¼ãƒ«: å‹ç‡{rule_performance['breakout_buy']['win_rate']}%
        
        æ”¹å–„ç‚¹:
        {self._generate_improvement_suggestions(rule_performance)}
        """
```

#### 3.6.3 æ”¹å–„ææ¡ˆ
```python
class ImprovementAdvisor:
    """æ”¹å–„ææ¡ˆã®ç”Ÿæˆ"""
    
    def suggest_rule_improvements(self, performance_data: Dict) -> List[str]:
        """ãƒ«ãƒ¼ãƒ«æ”¹å–„ææ¡ˆã®ç”Ÿæˆ"""
        suggestions = []
        
        if performance_data['pullback_buy']['win_rate'] < 0.6:
            suggestions.append("æŠ¼ã—ç›®è²·ã„ãƒ«ãƒ¼ãƒ«ã®RSIé–¾å€¤ã‚’40ã‹ã‚‰35ã«ä¸‹ã’ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„")
        
        if performance_data['false_positive_rate'] > 0.25:
            suggestions.append("ãƒœãƒªãƒ¥ãƒ¼ãƒ æ¡ä»¶ã‚’è¿½åŠ ã—ã¦å½ã‚·ã‚°ãƒŠãƒ«ã‚’æ¸›ã‚‰ã™ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„")
        
        if performance_data['max_drawdown'] > 0.05:
            suggestions.append("ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ã‚’ATR*1.0ã‹ã‚‰ATR*0.8ã«ç¸®å°ã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„")
        
        return suggestions
    
    def suggest_parameter_adjustments(self, backtest_results: Dict) -> Dict:
        """ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ææ¡ˆã®ç”Ÿæˆ"""
        return {
            "rsi_threshold": {
                "current": 40,
                "suggested": 35,
                "reason": "éå»30æ—¥é–“ã®ãƒ‡ãƒ¼ã‚¿åˆ†æã«ã‚ˆã‚Šã€RSIé–¾å€¤35ã§ã‚ˆã‚Šé«˜ã„å‹ç‡ãŒæœŸå¾…ã•ã‚Œã‚‹",
                "confidence": 0.85
            },
            "atr_multiplier": {
                "current": 1.5,
                "suggested": 1.8,
                "reason": "ãƒªã‚¹ã‚¯ãƒªãƒ¯ãƒ¼ãƒ‰æ¯”ã®æ”¹å–„ã«ã‚ˆã‚Šã€ATRå€ç‡1.8ã§ã‚ˆã‚Šè‰¯ã„çµæœãŒæœŸå¾…ã•ã‚Œã‚‹",
                "confidence": 0.78
            }
        }
```

### 3.7 Stage 7: Discordé…ä¿¡

#### 3.7.1 ã‚·ãƒŠãƒªã‚ªä½œæˆé€šçŸ¥
```python
SCENARIO_CREATED_FORMAT = """
ğŸŸ¡ **SCENARIO CREATED** ğŸŸ¡
ğŸ“Š **USD/JPY** | {strategy}
â° **ä½œæˆæ™‚åˆ»**: {timestamp}

ğŸ¯ **ã‚·ãƒŠãƒªã‚ªID**: {scenario_id}
ğŸ“‹ **æˆ¦ç•¥**: {strategy_name}
â±ï¸ **æœ‰åŠ¹æœŸé™**: {expires_at}

ğŸ’¡ **ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ¡ä»¶**: {entry_conditions}
ğŸ‘€ **ç›£è¦–ä¸­**: {monitoring_status}
âš ï¸ **ãƒªã‚¹ã‚¯åˆ¶ç´„**: {risk_constraints}

ğŸ” **ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«çŠ¶æ³**: {technical_summary}
ğŸ“ˆ **ç¾åœ¨ä¾¡æ ¼**: {current_price}
```
```

#### 3.7.2 ã‚¨ãƒ³ãƒˆãƒªãƒ¼é€šçŸ¥
```python
ENTRY_NOTIFICATION_FORMAT = """
ğŸŸ¢ **ENTRY SIGNAL** ğŸŸ¢
ğŸ“Š **USD/JPY** | {strategy}
â° **æ™‚åˆ»**: {timestamp}

ğŸ¯ **ã‚¨ãƒ³ãƒˆãƒªãƒ¼**: {direction} @ {entry_price}
ğŸ›‘ **SL**: {stop_loss} ({sl_pips} pips)
ğŸ’° **TP1**: {tp1} ({tp1_pips} pips)
ğŸ’° **TP2**: {tp2} ({tp2_pips} pips)
ğŸ’° **TP3**: {tp3} ({tp3_pips} pips)

ğŸ“ˆ **ç¢ºç‡**: {probability}% | **RR**: {risk_reward}
â±ï¸ **æœ€å¤§ä¿æœ‰**: {max_hold_time}åˆ†
ğŸ¯ **ã‚·ãƒŠãƒªã‚ªID**: {scenario_id}

ğŸ’¡ **æ ¹æ‹ **: {rule_summary}
ğŸ” **ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«**: {technical_summary}
âš ï¸ **ãƒªã‚¹ã‚¯**: {risk_factors}
"""
```

#### 3.7.3 ã‚¨ã‚°ã‚¸ãƒƒãƒˆé€šçŸ¥
```python
EXIT_NOTIFICATION_FORMAT = """
ğŸ”´ **EXIT SIGNAL** ğŸ”´
ğŸ“Š **USD/JPY** | {scenario_id}
â° **æ™‚åˆ»**: {timestamp}

ğŸ’° **ã‚¨ã‚°ã‚¸ãƒƒãƒˆ**: {exit_price}
ğŸ“ˆ **P&L**: {profit_loss} pips ({profit_loss_percent}%)
â±ï¸ **ä¿æœ‰æ™‚é–“**: {hold_time}åˆ†
ğŸ¯ **ã‚¨ã‚°ã‚¸ãƒƒãƒˆç†ç”±**: {exit_reason}

ğŸ“Š **ãƒ«ãƒ¼ãƒ«éµå®ˆã‚¹ã‚³ã‚¢**: {adherence_score}/100
ğŸ·ï¸ **é•åã‚¿ã‚°**: {violation_tags}

ğŸ’¡ **åˆ†æ**: {analysis_summary}
```

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 4.1 ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹å£²è²·ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼‰
```
ãƒ‡ãƒ¼ã‚¿åé›†å®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆ â†’ ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æ â†’ ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹åˆ¤å®š â†’ ã‚·ãƒŠãƒªã‚ªç®¡ç† â†’ Discordé…ä¿¡
       â†“                    â†“              â†“              â†“
   ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«      éšå±¤çš„åˆ†æ      ã‚¨ãƒ³ãƒˆãƒªãƒ¼/ã‚¨ã‚°ã‚¸ãƒƒãƒˆ    ã‚¹ãƒŠãƒƒãƒ—ä¿å­˜
       â†“                    â†“              â†“              â†“
   ã‚¤ãƒ™ãƒ³ãƒˆç›£è¦–        ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—    ãƒ«ãƒ¼ãƒ«éµå®ˆåˆ¤å®š      æ—¥æ¬¡è©•ä¾¡ãƒ»æ”¹å–„
       â†“                    â†“              â†“              â†“
   ç¶™ç¶šçš„ç›£è¦–ãƒ„ãƒ¼ãƒ«      åˆ†æçµæœä¿å­˜      ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¿½è·¡    ãƒ«ãƒ¼ãƒ«æ”¹å–„ææ¡ˆ
```

### 4.2 å‡¦ç†ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ï¼‰
1. **ãƒ‡ãƒ¼ã‚¿åé›†**: 5åˆ†é–“éš”ã§Yahoo Finance API + TimescaleDBï¼ˆèªè¨¼ä¸è¦ï¼‰
2. **ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ**: ãƒ‡ãƒ¼ã‚¿åé›†å®Œäº†æ™‚ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã«è¨˜éŒ²
3. **ã‚¤ãƒ™ãƒ³ãƒˆç›£è¦–**: åˆ†æã‚µãƒ¼ãƒ“ã‚¹ãŒã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›£è¦–ãƒ»å‡¦ç†
4. **ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—**: TA-Lib + ãƒ•ã‚£ãƒœãƒŠãƒƒãƒï¼ˆéšå±¤çš„åˆ†æï¼‰
5. **ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹åˆ¤å®š**: ã‚¨ãƒ³ãƒˆãƒªãƒ¼/ã‚¨ã‚°ã‚¸ãƒƒãƒˆæ¡ä»¶ãƒã‚§ãƒƒã‚¯
6. **ã‚·ãƒŠãƒªã‚ªç®¡ç†**: ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†
7. **ã‚·ãƒŠãƒªã‚ªä½œæˆé€šçŸ¥**: Discordé…ä¿¡ï¼ˆã‚·ãƒŠãƒªã‚ªä½œæˆæ™‚ï¼‰
8. **ã‚¹ãƒŠãƒƒãƒ—ä¿å­˜**: ã‚¨ãƒ³ãƒˆãƒªãƒ¼/ã‚¨ã‚°ã‚¸ãƒƒãƒˆæ™‚ç‚¹ã®è¨˜éŒ²
9. **Discordé…ä¿¡**: å£²è²·ã‚·ã‚°ãƒŠãƒ«é€šçŸ¥ï¼ˆã‚¨ãƒ³ãƒˆãƒªãƒ¼/ã‚¨ã‚°ã‚¸ãƒƒãƒˆæ™‚ï¼‰
10. **ãƒ«ãƒ¼ãƒ«éµå®ˆåˆ¤å®š**: 100ç‚¹æº€ç‚¹è©•ä¾¡
11. **LLMè£œåŠ©å‡¦ç†**: è¨€èªåŒ–ãƒ»æ—¥èªŒç”Ÿæˆãƒ»æ”¹å–„ææ¡ˆ
12. **æ—¥æ¬¡è©•ä¾¡**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æãƒ»ãƒ«ãƒ¼ãƒ«æ”¹å–„
13. **ç¶™ç¶šçš„ç›£è¦–**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚‹ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ã®å¯è¦–åŒ–

### 4.3 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **Yahoo Finance APIã‚¨ãƒ©ãƒ¼**: å†æ¥ç¶šãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆèªè¨¼ä¸è¦ï¼‰
- **ãƒ«ãƒ¼ãƒ«åˆ¤å®šã‚¨ãƒ©ãƒ¼**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãƒ»ãƒ­ã‚°è¨˜éŒ²
- **é…ä¿¡ã‚¨ãƒ©ãƒ¼**: ãƒªãƒˆãƒ©ã‚¤ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥

---

## 5. APIä»•æ§˜

### 5.1 Yahoo Finance Stream APIï¼ˆèªè¨¼ä¸è¦è¨­è¨ˆï¼‰
```python
class YahooFinanceStreamClient:
    async def start_price_stream(self, instruments: List[str]) -> None:
        """ä¾¡æ ¼ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®é–‹å§‹"""
    
    async def get_current_price(self, instrument: str) -> PriceData:
        """ç¾åœ¨ä¾¡æ ¼ã®å–å¾—"""
    
    def add_callback(self, stream_type: StreamType, callback: Callable) -> None:
        """ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®è¿½åŠ """
    
    async def initialize(self) -> None:
        """åˆæœŸåŒ–ï¼ˆèªè¨¼ä¸è¦ï¼‰"""
```

### 5.2 ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³API
```python
class RuleBasedEngine:
    def evaluate_conditions(self, data: Dict, rule_set: str) -> Dict:
        """æ¡ä»¶è©•ä¾¡"""
    
    def check_constraints(self, scenario: Dict) -> bool:
        """åˆ¶ç´„ãƒã‚§ãƒƒã‚¯"""
    
    def calculate_risk_metrics(self, trade: Dict) -> Dict:
        """ãƒªã‚¹ã‚¯æŒ‡æ¨™è¨ˆç®—"""
```

### 5.3 Discord API
```python
class DiscordNotifier:
    async def send_scenario_created(self, scenario: Dict) -> bool:
        """ã‚·ãƒŠãƒªã‚ªä½œæˆé€šçŸ¥é€ä¿¡"""
    
    async def send_entry_signal(self, signal: Dict) -> bool:
        """ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚·ã‚°ãƒŠãƒ«é€ä¿¡"""
    
    async def send_exit_signal(self, signal: Dict) -> bool:
        """ã‚¨ã‚°ã‚¸ãƒƒãƒˆã‚·ã‚°ãƒŠãƒ«é€ä¿¡"""
    
    async def send_daily_report(self, report: Dict) -> bool:
        """æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆé€ä¿¡"""
```

---

## 6. è¨­å®šä»•æ§˜

### 6.1 å£²è²·è¨­å®š (trading_config.yaml)
```yaml
# åŸºæœ¬è¨­å®š
trading:
  symbol: "USD_JPY"
  account_id: "${OANDA_ACCOUNT_ID}"
  access_token: "${OANDA_ACCESS_TOKEN}"
  environment: "practice"  # practice/live
  
# ãƒªã‚¹ã‚¯ç®¡ç†
risk_management:
  max_risk_per_trade: 1.0  # %
  max_risk_per_day: 3.0    # %
  max_trades_per_day: 5
  max_hold_time_minutes: 240
  min_hold_time_minutes: 30
  correlation_threshold: 0.7

# ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨­å®š
sessions:
  tokyo:
    start: "09:00"
    end: "15:00"
    timezone: "JST"
  london:
    start: "16:00"
    end: "24:00"
    timezone: "JST"
  new_york:
    start: "22:00"
    end: "06:00"
    timezone: "JST"

# ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ–ãƒ©ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
news_blackout:
  - start: "2025-01-04T21:30:00Z"
    end: "2025-01-04T22:00:00Z"
    event: "NFP"
  - start: "2025-01-04T14:00:00Z"
    end: "2025-01-04T14:30:00Z"
    event: "FOMC"

# ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨­å®š
technical_indicators:
  rsi:
    period: 14
    oversold: 30
    overbought: 70
  macd:
    fast: 12
    slow: 26
    signal: 9
  ema:
    short: 21
    medium: 55
    long: 200
  atr:
    period: 14
    multiplier: 1.0
```

### 6.2 ãƒ«ãƒ¼ãƒ«å®šç¾© (rules.yaml)
```yaml
# ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ«ãƒ¼ãƒ«ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ãªè¨­å®šï¼‰
active_rules:
  - name: "pullback_buy"
    enabled: true
    description: "æŠ¼ã—ç›®è²·ã„"
    conditions:
      - "RSI_14 <= 40"
      - "price > EMA_200"
      - "MACD > MACD_Signal"
      - "price BETWEEN Fib_0.382 AND Fib_0.618"
      - "active_session = Tokyo OR London"
      - "daily_trades < 5"
      - "daily_risk < 3%"
  
  - name: "breakout_buy"
    enabled: false  # æ®µéšçš„å°å…¥
    description: "ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆè²·ã„"
    conditions:
      - "price > EMA_21"
      - "RSI_14 > 50"
      - "MACD > 0"
      - "price > Fib_1.272"
      - "Volume_Ratio > 1.5"
      - "active_session = London OR NewYork"
      - "daily_trades < 5"
      - "daily_risk < 3%"
  
  - name: "reversal_sell"
    enabled: false  # æ®µéšçš„å°å…¥
    description: "é€†å¼µã‚Šå£²ã‚Š"
    conditions:
      - "RSI_14 >= 70"
      - "price < EMA_200"
      - "MACD < MACD_Signal"
      - "price BETWEEN Fib_0.618 AND Fib_0.786"
      - "active_session = Tokyo OR London"
      - "daily_trades < 5"
      - "daily_risk < 3%"

# ã‚¨ã‚°ã‚¸ãƒƒãƒˆãƒ«ãƒ¼ãƒ«ï¼ˆå…±é€šï¼‰
exit_rules:
  profit_targets:
    tp1:
      condition: "price >= entry_price + (ATR * 1.5)"
      action: "close_50_percent"
    tp2:
      condition: "price >= entry_price + (ATR * 2.5)"
      action: "close_30_percent"
    tp3:
      condition: "price >= entry_price + (ATR * 4.0)"
      action: "close_remaining"
  
  stop_loss:
    sl:
      condition: "price <= entry_price - (ATR * 1.0)"
      action: "close_all"
  
  time_based:
    max_hold:
      condition: "hold_time >= 240 minutes"
      action: "close_all"
    min_hold:
      condition: "hold_time >= 30 minutes"
      action: "allow_exit"

# ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®šï¼ˆç°¡å˜ã«èª¿æ•´å¯èƒ½ï¼‰
parameters:
  rsi_oversold: 40
  rsi_overbought: 70
  atr_stop_loss: 1.0
  atr_take_profit_1: 1.5
  atr_take_profit_2: 2.5
  atr_take_profit_3: 4.0
  ema_short: 21
  ema_medium: 55
  ema_long: 200
```

### 6.3 Discordè¨­å®š
```yaml
discord:
  webhook_url: "${DISCORD_WEBHOOK_URL}"
  channel_id: "${DISCORD_CHANNEL_ID}"
  thread_creation: true
  message_formatting: true
  
  # é€šçŸ¥è¨­å®š
  notifications:
    scenario_created: true    # ã‚·ãƒŠãƒªã‚ªä½œæˆæ™‚
    entry_signals: true       # ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ™‚
    exit_signals: true        # ã‚¨ã‚°ã‚¸ãƒƒãƒˆæ™‚
    daily_reports: true       # æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆ
    error_alerts: true        # ã‚¨ãƒ©ãƒ¼ã‚¢ãƒ©ãƒ¼ãƒˆ
    
  # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¨­å®š
  message_settings:
    embed_color_scenario: 0xffff00  # é»„ï¼ˆã‚·ãƒŠãƒªã‚ªä½œæˆï¼‰
    embed_color_entry: 0x00ff00     # ç·‘ï¼ˆã‚¨ãƒ³ãƒˆãƒªãƒ¼ï¼‰
    embed_color_exit: 0xff0000      # èµ¤ï¼ˆã‚¨ã‚°ã‚¸ãƒƒãƒˆï¼‰
    embed_color_report: 0x0099ff    # é’ï¼ˆãƒ¬ãƒãƒ¼ãƒˆï¼‰
    include_technical_details: true
    include_risk_metrics: true
```

---

## 7. å®Ÿè£…è¨ˆç”»

### 7.1 Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆâœ…å®Œäº†ï¼‰
- [x] æ—¢å­˜llm_analysisãƒ•ã‚©ãƒ«ãƒ€ã®æ‹¡å¼µ
- [x] Yahoo Finance Stream APIé€£æºã®å®Ÿè£…ï¼ˆèªè¨¼ä¸è¦ï¼‰
- [x] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€£æºå‹ãƒ‡ãƒ¼ã‚¿æº–å‚™å™¨ã®å®Ÿè£…
- [x] æ—¢å­˜ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—å™¨ã®çµ±åˆï¼ˆâœ…å®Œæˆæ¸ˆã¿ï¼‰
- [x] åŸºæœ¬ãƒ†ã‚¹ãƒˆã®å®Ÿè£…

### 7.2 Phase 2: ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆâœ…å®Œäº†ï¼‰
- [x] ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹åˆ¤å®šã‚¨ãƒ³ã‚¸ãƒ³ã®å®Ÿè£…
- [x] ã‚·ãƒŠãƒªã‚ªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…
- [x] ã‚¹ãƒŠãƒƒãƒ—ä¿å­˜ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…
- [x] ãƒªã‚¹ã‚¯åˆ¶ç´„ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½
- [x] ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ«ãƒ¼ãƒ«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…

### 7.3 Phase 3: è©•ä¾¡ãƒ»æ”¹å–„ã‚·ã‚¹ãƒ†ãƒ ï¼ˆâœ…å®Œäº†ï¼‰
- [x] ãƒ«ãƒ¼ãƒ«éµå®ˆåˆ¤å®šã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…
- [x] æ—¥æ¬¡è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…
- [x] ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ«ãƒ¼ãƒ«æ”¹å–„ææ¡ˆã‚·ã‚¹ãƒ†ãƒ 
- [x] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†ææ©Ÿèƒ½
- [x] çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

### 7.4 Phase 4: ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆâœ…å®Œäº†ï¼‰
- [x] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ
- [x] ãƒ‡ãƒ¼ã‚¿åé›†ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œæ©Ÿèƒ½ã‚’è¿½åŠ 
- [x] ç‹¬ç«‹ã—ãŸåˆ†æã‚µãƒ¼ãƒ“ã‚¹ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆç›£è¦–ï¼‰ã®ä½œæˆ
- [x] ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æã‚µãƒ¼ãƒ“ã‚¹ã®å®Ÿè£…
- [x] ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ†ã‚¹ãƒˆ

### 7.5 Phase 5: é€šçŸ¥ãƒ»é…ä¿¡ï¼ˆâœ…å®Œäº†ï¼‰
- [x] Discordé…ä¿¡ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…
- [x] ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã®å®Ÿè£…
- [x] ã‚·ãƒŠãƒªã‚ªä½œæˆ/ã‚¨ãƒ³ãƒˆãƒªãƒ¼/ã‚¨ã‚°ã‚¸ãƒƒãƒˆé€šçŸ¥
- [x] æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆé…ä¿¡
- [x] ã‚¨ãƒ©ãƒ¼ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½

### 7.6 Phase 6: çµ±åˆãƒ»æœ€é©åŒ–ï¼ˆâœ…å®Œäº†ï¼‰
- [x] å£²è²·ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆ
- [x] ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚·ã‚¹ãƒ†ãƒ ã®çµ±åˆ
- [x] ç¶™ç¶šçš„ç›£è¦–ãƒ„ãƒ¼ãƒ«ã®å®Ÿè£…
- [x] çµ±åˆãƒ†ã‚¹ãƒˆ
- [x] é‹ç”¨ãƒ†ã‚¹ãƒˆ

### 7.7 Phase 7: LLMè£œåŠ©æ©Ÿèƒ½ï¼ˆæœªå®Ÿè£…ï¼‰
- [ ] è¨€èªåŒ–å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…
- [ ] æ—¥èªŒç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…
- [ ] æ”¹å–„ææ¡ˆã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…
- [ ] LLM APIé€£æºï¼ˆOpenAI/Anthropicï¼‰
- [ ] è‡ªç„¶è¨€èªãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

### 7.8 æ®µéšçš„ãƒ«ãƒ¼ãƒ«å°å…¥è¨ˆç”»ï¼ˆç¾åœ¨ã®çŠ¶æ³ï¼‰
- [x] **Week 1**: pullback_buy ã®ã¿ã§é‹ç”¨é–‹å§‹ï¼ˆâœ…å®Œäº†ï¼‰
- [x] **Week 2**: breakout_buy ã‚’æœ‰åŠ¹åŒ–ï¼ˆâœ…å®Œäº†ï¼‰
- [x] **Week 3**: reversal_sell ã‚’æœ‰åŠ¹åŒ–ï¼ˆâœ…å®Œäº†ï¼‰
- [x] **Week 4**: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–ï¼ˆâœ…å®Œäº†ï¼‰
- [x] **Week 5**: ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å®Ÿè£…ï¼ˆâœ…å®Œäº†ï¼‰
- [x] **Week 6**: ç¶™ç¶šçš„ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…ï¼ˆâœ…å®Œäº†ï¼‰

### 7.9 ç¾åœ¨ã®é‹ç”¨çŠ¶æ³
- âœ… **ãƒ‡ãƒ¼ã‚¿åé›†ãƒ‡ãƒ¼ãƒ¢ãƒ³**: 5åˆ†é–“éš”ã§ãƒ‡ãƒ¼ã‚¿åé›†ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
- âœ… **ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æã‚µãƒ¼ãƒ“ã‚¹**: ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã§è‡ªå‹•åˆ†æå®Ÿè¡Œ
- âœ… **ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³**: 5ã¤ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ«ãƒ¼ãƒ«ã§ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ
- âœ… **ã‚·ãƒŠãƒªã‚ªç®¡ç†**: ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‹ã‚‰ã‚¨ã‚°ã‚¸ãƒƒãƒˆã¾ã§ã®å®Œå…¨ç®¡ç†
- âœ… **Discordé€šçŸ¥**: ã‚·ãƒŠãƒªã‚ªä½œæˆãƒ»ã‚·ã‚°ãƒŠãƒ«é€šçŸ¥ã®è‡ªå‹•é…ä¿¡
- âœ… **ç¶™ç¶šçš„ç›£è¦–**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚‹ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ã®å¯è¦–åŒ–

---

## 8. å“è³ªè¦ä»¶

### 8.1 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶
- **ä¾¡æ ¼æ›´æ–°å¿œç­”**: 100msä»¥å†…
- **ãƒ«ãƒ¼ãƒ«åˆ¤å®š**: 50msä»¥å†…
- **é…ä¿¡æ™‚é–“**: 5ç§’ä»¥å†…
- **æ—¥æ¬¡è©•ä¾¡**: 30ç§’ä»¥å†…

### 8.2 å¯ç”¨æ€§è¦ä»¶
- **ã‚·ã‚¹ãƒ†ãƒ å¯ç”¨æ€§**: 99.9%ä»¥ä¸Š
- **OANDA APIå¯ç”¨æ€§**: 99.5%ä»¥ä¸Š
- **Discordé…ä¿¡æˆåŠŸç‡**: 95%ä»¥ä¸Š

### 8.3 å“è³ªè¦ä»¶
- **ãƒ«ãƒ¼ãƒ«éµå®ˆç‡**: 90%ä»¥ä¸Š
- **é…ä¿¡ç²¾åº¦**: 95%ä»¥ä¸Š
- **ã‚¨ãƒ©ãƒ¼ç‡**: 1%ä»¥ä¸‹
- **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§**: 100%

### 8.4 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶
- **API ã‚­ãƒ¼ç®¡ç†**: ç’°å¢ƒå¤‰æ•°ã§ã®ç®¡ç†
- **ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–**: é€šä¿¡ã®æš—å·åŒ–
- **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**: é©åˆ‡ãªæ¨©é™ç®¡ç†
- **ç›£æŸ»ãƒ­ã‚°**: å…¨æ“ä½œã®è¨˜éŒ²

---

## 9. ç›£è¦–ãƒ»ãƒ­ã‚°

### 9.1 ç›£è¦–é …ç›®
- **ãƒ‡ãƒ¼ã‚¿åé›†çŠ¶æ³**: å„æ™‚é–“è¶³ã®æœ€æ–°ãƒ‡ãƒ¼ã‚¿æ™‚åˆ»ã¨ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°
- **ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†çŠ¶æ³**: ãƒ‡ãƒ¼ã‚¿åé›†å®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†çŠ¶æ³
- **åˆ†æçµæœ**: ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æã®å®Ÿè¡Œçµæœã¨æ¡ä»¶åˆè‡´çŠ¶æ³
- **ã‚·ãƒŠãƒªã‚ªçŠ¶æ³**: ä½œæˆã•ã‚ŒãŸã‚·ãƒŠãƒªã‚ªã®æƒ…å ±ã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
- **ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹**: å…¨ä½“çš„ãªã‚·ã‚¹ãƒ†ãƒ ã®å¥å…¨æ€§
- **ãƒ«ãƒ¼ãƒ«åˆ¤å®šæ™‚é–“**: å„ãƒ«ãƒ¼ãƒ«ã®è©•ä¾¡æ™‚é–“
- **ã‚·ãƒŠãƒªã‚ªæˆåŠŸç‡**: ã‚·ãƒŠãƒªã‚ªã®æˆåŠŸç‡
- **é…ä¿¡æˆåŠŸç‡**: Discordé…ä¿¡ã®æˆåŠŸç‡
- **ãƒ«ãƒ¼ãƒ«éµå®ˆç‡**: æ—¥æ¬¡ãƒ«ãƒ¼ãƒ«éµå®ˆç‡

### 9.2 ãƒ­ã‚°ä»•æ§˜
```python
# ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
LOGGING_LEVELS = {
    "DEBUG": "è©³ç´°ãªãƒ‡ãƒãƒƒã‚°æƒ…å ±",
    "INFO": "ä¸€èˆ¬çš„ãªæƒ…å ±",
    "WARNING": "è­¦å‘Šæƒ…å ±",
    "ERROR": "ã‚¨ãƒ©ãƒ¼æƒ…å ±",
    "CRITICAL": "é‡å¤§ãªã‚¨ãƒ©ãƒ¼"
}

# ãƒ­ã‚°å‡ºåŠ›é …ç›®
LOG_FIELDS = [
    "timestamp", "level", "module", "function", 
    "message", "trade_id", "scenario_id", "adherence_score"
]
```

---

## 10. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 10.1 ãƒ†ã‚¹ãƒˆéšå±¤
- **å˜ä½“ãƒ†ã‚¹ãƒˆ**: å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å€‹åˆ¥ãƒ†ã‚¹ãƒˆ
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®é€£æºãƒ†ã‚¹ãƒˆ
- **E2Eãƒ†ã‚¹ãƒˆ**: å…¨ä½“ãƒ•ãƒ­ãƒ¼ã®ãƒ†ã‚¹ãƒˆ
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**: è² è·ãƒ»å¿œç­”æ™‚é–“ãƒ†ã‚¹ãƒˆ

### 10.2 ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
- **ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸**: 85%ä»¥ä¸Š
- **æ©Ÿèƒ½ã‚«ãƒãƒ¬ãƒƒã‚¸**: 100%
- **APIã‚«ãƒãƒ¬ãƒƒã‚¸**: 100%
- **ãƒ«ãƒ¼ãƒ«ã‚«ãƒãƒ¬ãƒƒã‚¸**: 100%

---

## 11. ç¾åœ¨ã®é–‹ç™ºçŠ¶æ³ã‚µãƒãƒªãƒ¼

### 11.1 å®Œäº†æ¸ˆã¿æ©Ÿèƒ½
- âœ… **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ãƒ‡ãƒ¼ã‚¿åé›†å®Œäº†æ™‚ã®è‡ªå‹•ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æ
- âœ… **éšå±¤çš„ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æ**: D1/H4ï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰ã€H1ï¼ˆã‚¾ãƒ¼ãƒ³ï¼‰ã€M5ï¼ˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼‰
- âœ… **ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹å£²è²·ã‚·ã‚¹ãƒ†ãƒ **: 5ã¤ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ«ãƒ¼ãƒ«
- âœ… **ã‚·ãƒŠãƒªã‚ªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ **: ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‹ã‚‰ã‚¨ã‚°ã‚¸ãƒƒãƒˆã¾ã§ã®å®Œå…¨ç®¡ç†
- âœ… **Discordé€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ **: ã‚·ãƒŠãƒªã‚ªä½œæˆãƒ»ã‚·ã‚°ãƒŠãƒ«é€šçŸ¥ã®è‡ªå‹•é…ä¿¡
- âœ… **ç¶™ç¶šçš„ç›£è¦–ãƒ„ãƒ¼ãƒ«**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ã¨æ—¥æœ¬æ™‚é–“è¡¨ç¤º
- âœ… **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«**: ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚·ã‚¹ãƒ†ãƒ ã®æ°¸ç¶šåŒ–

### 11.2 ç¾åœ¨é‹ç”¨ä¸­ã®ã‚·ã‚¹ãƒ†ãƒ 
1. **ãƒ‡ãƒ¼ã‚¿åé›†ãƒ‡ãƒ¼ãƒ¢ãƒ³** (`start_event_driven_system.py`)
   - 5åˆ†é–“éš”ã§ãƒ‡ãƒ¼ã‚¿åé›†
   - ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã§ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æå®Ÿè¡Œ
   - ã‚·ãƒŠãƒªã‚ªä½œæˆã¨Discordé€šçŸ¥

2. **ç¶™ç¶šçš„ç›£è¦–ãƒ„ãƒ¼ãƒ«** (`continuous_monitor.py`)
   - 10ç§’é–“éš”ã§ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ã‚’ç›£è¦–
   - æ—¥æœ¬æ™‚é–“è¡¨ç¤ºã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
   - ãƒ‡ãƒ¼ã‚¿æ›´æ–°çŠ¶æ³ã®å¯è¦–åŒ–

### 11.3 ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ«ãƒ¼ãƒ«
- **pullback_buy**: æŠ¼ã—ç›®è²·ã„ï¼ˆRSI â‰¤ 40, ä¾¡æ ¼ > EMA200ï¼‰
- **reversal_sell**: é€†å¼µã‚Šå£²ã‚Šï¼ˆRSI â‰¥ 70, ä¾¡æ ¼ < EMA200ï¼‰
- **trend_follow_sell**: ä¸‹é™ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ•ã‚©ãƒ­ãƒ¼å£²ã‚Š
- **strong_downtrend_sell**: å¼·ã„ä¸‹é™ãƒˆãƒ¬ãƒ³ãƒ‰å£²ã‚Šï¼ˆRSI 25-40ï¼‰

### 11.4 æœªå®Ÿè£…æ©Ÿèƒ½
- **LLMè£œåŠ©æ©Ÿèƒ½**: è¨€èªåŒ–ãƒ»æ—¥èªŒç”Ÿæˆãƒ»æ”¹å–„ææ¡ˆ
- **è¿½åŠ ãƒ†ã‚¹ãƒˆ**: çµ±åˆãƒ†ã‚¹ãƒˆãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

---

**æ–‡æ›¸ç®¡ç†æƒ…å ±**

- æ–‡æ›¸ID: RULE-BASED-TRADING-SPEC-001
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³: v3.0
- ä½œæˆæ—¥: 2025-01-04
- æœ€çµ‚æ›´æ–°: 2025-09-18
- æ‰¿èªè€…: [ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆè€…]
- æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼äºˆå®š: 2025-10-18
