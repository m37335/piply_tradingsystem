# è£é‡è£œåŠ©ãƒ¢ãƒ¼ãƒ‰è‡ªå‹•å£²è²·ã‚·ã‚¹ãƒ†ãƒ  åŒ…æ‹¬æŠ€è¡“ä»•æ§˜æ›¸ v2.0

**ä½œæˆæ—¥**: 2025å¹´1æœˆ4æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v2.0  
**å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ **: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å‹è£é‡è£œåŠ©ãƒ¢ãƒ¼ãƒ‰è‡ªå‹•å£²è²·ã‚·ã‚¹ãƒ†ãƒ   
**ç›®çš„**: å®Œå…¨ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å‹è¨­è¨ˆã«ã‚ˆã‚‹ã‚·ã‚¹ãƒ†ãƒ å†æ§‹ç¯‰

---

## ğŸ“‹ ç›®æ¬¡

1. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#1-ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
2. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ](#2-ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ)
3. [ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆ](#3-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆ)
4. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](#4-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ)
5. [APIåˆ¶é™å¯¾ç­–](#5-apiåˆ¶é™å¯¾ç­–)
6. [LLMåˆ†æã‚·ã‚¹ãƒ†ãƒ ](#6-llmåˆ†æã‚·ã‚¹ãƒ†ãƒ )
7. [Dockerç’°å¢ƒæ§‹ç¯‰](#7-dockerç’°å¢ƒæ§‹ç¯‰)
8. [Git/GitHubãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼](#8-gitgithubãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼)
9. [ãƒ†ã‚¹ãƒˆæˆ¦ç•¥](#9-ãƒ†ã‚¹ãƒˆæˆ¦ç•¥)
10. [é‹ç”¨ãƒ»ç›£è¦–](#10-é‹ç”¨ç›£è¦–)
11. [å®Ÿè£…è¨ˆç”»](#11-å®Ÿè£…è¨ˆç”»)
12. [ä»˜éŒ²](#12-ä»˜éŒ²)

---

## 1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### 1.1 ç›®çš„ã¨ç¯„å›²

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ USD/JPY ã® M5 è¶³ã‚’å¯¾è±¡ã¨ã—ãŸã€Œè£é‡è£œåŠ©ãƒ¢ãƒ¼ãƒ‰ã€ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã§ã‚ã‚‹ã€‚

**åŸºæœ¬æ–¹é‡**
- æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹å¸‚å ´åˆ†æã¨ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ
- LLMã«ã‚ˆã‚‹é«˜åº¦ãªå¸‚å ´è§£é‡ˆã¨ãƒªã‚¹ã‚¯åˆ†æ
- Discord ã‚’é€šã˜ãŸææ¡ˆé…ä¿¡ï¼ˆENTRY PROPOSAL / OBSERVEï¼‰
- æœ€çµ‚çš„ãªç™ºæ³¨åˆ¤æ–­ã¯äººé–“ãŒå®Ÿè¡Œ
- è‡ªå‹•ç™ºæ³¨æ©Ÿèƒ½ã¯å®Ÿè£…ã—ãªã„

**å¯¾è±¡å¸‚å ´**
- é€šè²¨ãƒšã‚¢: USD/JPY
- æ™‚é–“è¶³: M5ï¼ˆ5åˆ†è¶³ï¼‰
- å–å¼•æ™‚é–“: 24æ™‚é–“ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆçª“é™¤ãï¼‰

### 1.2 ã‚·ã‚¹ãƒ†ãƒ è²¬ä»»ç¯„å›²

| æ©Ÿèƒ½é ˜åŸŸ | ã‚·ã‚¹ãƒ†ãƒ è²¬ä»» | äººé–“è²¬ä»» |
|---------|------|----|
| ãƒ‡ãƒ¼ã‚¿åé›† | âœ“ | - |
| ç‰¹å¾´é‡è¨ˆç®— | âœ“ | - |
| AIæ¨è«– | âœ“ | - |
| LLMåˆ†æ | âœ“ | - |
| ãƒªã‚¹ã‚¯è©•ä¾¡ | âœ“ | - |
| ææ¡ˆç”Ÿæˆ | âœ“ | - |
| Discordé€šçŸ¥ | âœ“ | - |
| ç™ºæ³¨åˆ¤æ–­ | - | âœ“ |
| ãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç† | - | âœ“ |
| æåˆ‡ã‚Š/åˆ©ç¢º | - | âœ“ |

### 1.3 ç”¨èªãƒ»å®šç¾©

| ç”¨èª | å®šç¾© |
|---------|---------------------------------|
| **p** | ä¸Šæ˜‡ç¢ºç‡ï¼ˆIsotonic Regression æ ¡æ­£å¾Œã€0-1ï¼‰ |
| **Î¼** | æœŸå¾…ãƒªã‚¿ãƒ¼ãƒ³ï¼ˆbpå˜ä½ã€æ‰‹æ•°æ–™æ§é™¤å¾Œï¼‰ |
| **RR** | ãƒªã‚¹ã‚¯ãƒªãƒ¯ãƒ¼ãƒ‰æ¯”ï¼ˆæœŸå¾…ãƒªã‚¿ãƒ¼ãƒ³ Ã· æƒ³å®šæå¤±ï¼‰ |
| **ATR%** | ATR14 Ã· close Ã— 100ï¼ˆãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£æŒ‡æ¨™ï¼‰ |
| **ã‚¤ãƒ™ãƒ³ãƒˆçª“** | çµŒæ¸ˆæŒ‡æ¨™ç™ºè¡¨å‰å¾Œã®å–å¼•ç¦æ­¢æ™‚é–“å¸¯ |
| **ã‚¹ãƒ†ã‚£ãƒƒãƒ** | è¤‡æ•°ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®çµ±åˆãƒ»å“è³ªç®¡ç†å‡¦ç† |
| **åˆ†ä½å¤‰æ›** | ç‰¹å¾´é‡ã®åˆ†å¸ƒã‚’æ­£è¦åŒ–ã™ã‚‹çµ±è¨ˆå‡¦ç† |
| **ç¸®å°ã‚±ãƒªãƒ¼** | ã‚±ãƒªãƒ¼åŸºæº–ã®0.5å€ã§ãƒªã‚¹ã‚¯ã‚’æŠ‘åˆ¶ã—ãŸè³‡é‡‘ç®¡ç† |

---

## 2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### 2.1 ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
/app/
â”œâ”€â”€ core/                          # ã‚³ã‚¢æ©Ÿèƒ½ï¼ˆå…±é€šåŸºç›¤ï¼‰
â”‚   â”œâ”€â”€ config/                    # çµ±ä¸€è¨­å®šç®¡ç†
â”‚   â”œâ”€â”€ logging/                   # çµ±ä¸€ãƒ­ã‚°ç®¡ç†
â”‚   â”œâ”€â”€ utils/                     # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ interfaces/                # å…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â””â”€â”€ exceptions/                # å…±é€šä¾‹å¤–
â”‚
â”œâ”€â”€ modules/                       # æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ data_collection/           # ãƒ‡ãƒ¼ã‚¿åé›†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ feature_engineering/       # ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ ml_inference/              # MLæ¨è«–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ llm_analysis/              # LLMåˆ†æãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ risk_management/           # ãƒªã‚¹ã‚¯ç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ signal_generation/         # ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ notification/              # é€šçŸ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ monitoring/                # ç›£è¦–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â””â”€â”€ data_persistence/          # ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚
â”œâ”€â”€ orchestration/                 # ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”œâ”€â”€ api/                          # APIå±¤
â”œâ”€â”€ cli/                          # CLIå±¤
â”œâ”€â”€ tests/                        # çµ±åˆãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ config/                       # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ scripts/                      # ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ docs/                         # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ docker/                       # Dockerè¨­å®š
â””â”€â”€ requirements/                 # ä¾å­˜é–¢ä¿‚
```

### 2.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
ãƒ‡ãƒ¼ã‚¿åé›† â†’ ç‰¹å¾´é‡è¨ˆç®— â†’ [MLæ¨è«– + LLMåˆ†æ] â†’ çµ±åˆåˆ†æ â†’ ãƒªã‚¹ã‚¯ç®¡ç† â†’ ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ â†’ Discordé€šçŸ¥ â†’ äººé–“åˆ¤æ–­
```

### 2.3 ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

- **DataCollector**: å¤šå…ƒãƒ‡ãƒ¼ã‚¿åé›†ãƒ»çµ±åˆ
- **FeatureEngine**: ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—ãƒ»æ­£è¦åŒ–
- **MLInference**: LightGBMæ¨è«–ã‚¨ãƒ³ã‚¸ãƒ³
- **LLMAnalyzer**: LLMåˆ†æã‚¨ãƒ³ã‚¸ãƒ³
- **RiskGate**: å¤šå±¤ãƒªã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
- **SignalGenerator**: ææ¡ˆã‚·ãƒŠãƒªã‚ªç”Ÿæˆ
- **DiscordNotifier**: é€šçŸ¥é…ä¿¡ã‚·ã‚¹ãƒ†ãƒ 
- **AuditLogger**: ç›£æŸ»ãƒ­ã‚°ãƒ»ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£

---

## 3. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆ

### 3.1 ãƒ‡ãƒ¼ã‚¿åé›†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

#### 3.1.1 æ©Ÿèƒ½æ¦‚è¦
- Yahoo Finance API ã‹ã‚‰ã®ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿åé›†
- è¤‡æ•°æ™‚é–“è¶³ï¼ˆM1, M5, M15, H1, H4, D1ï¼‰ã®ç®¡ç†
- ãƒ‡ãƒ¼ã‚¿å“è³ªç®¡ç†ã¨ã‚¹ãƒ†ã‚£ãƒƒãƒå‡¦ç†
- APIåˆ¶é™å¯¾ç­–ã¨ãƒ¬ãƒ¼ãƒˆåˆ¶é™ç®¡ç†

#### 3.1.2 ä¸»è¦ã‚¯ãƒ©ã‚¹
```python
class YahooFinanceCollector:
    """Yahoo Finance ãƒ‡ãƒ¼ã‚¿åé›†å™¨"""
    
class RateLimiter:
    """ãƒ¬ãƒ¼ãƒˆåˆ¶é™ç®¡ç†ã‚¯ãƒ©ã‚¹"""
    
class IntelligentDataCollector:
    """ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿åé›†å™¨"""
    
class DatabaseSaver:
    """ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜å™¨"""
```

#### 3.1.3 è¨­å®šä¾‹
```yaml
# config/modules/data_collection.yaml
rate_limiting:
  yahoo_finance:
    requests_per_minute: 45
    requests_per_hour: 1200
    requests_per_day: 10000
    burst_limit: 5
    cooldown_seconds: 120

collection_strategy:
  initial_collection:
    batch_size_days: 30
    delay_between_batches: 5
    max_retries: 3
  
  regular_updates:
    market_hours_frequency: 5
    non_market_frequency: 15
    weekend_backfill: true
```

### 3.2 LLMåˆ†æãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

#### 3.2.1 æ©Ÿèƒ½æ¦‚è¦
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«ã—ãŸLLMåˆ†æ
- å¸‚å ´ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æ
- ãƒ‘ã‚¿ãƒ¼ãƒ³è§£é‡ˆãƒ»èª¬æ˜
- ãƒªã‚¹ã‚¯ã‚·ãƒŠãƒªã‚ªåˆ†æ

#### 3.2.2 ä¸»è¦ã‚¯ãƒ©ã‚¹
```python
class DatabaseLLMAnalyzer:
    """ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€£æºå‹LLMåˆ†æå™¨"""
    
class LLMDataPreparator:
    """LLMåˆ†æç”¨ãƒ‡ãƒ¼ã‚¿æº–å‚™å™¨"""
    
class LLMClient:
    """LLM API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ"""
    
class AnalysisAggregator:
    """åˆ†æçµæœçµ±åˆå™¨"""
```

#### 3.2.3 åˆ†æã‚¿ã‚¤ãƒ—
- **market_sentiment**: å¸‚å ´ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æ
- **pattern_interpretation**: ãƒ‘ã‚¿ãƒ¼ãƒ³è§£é‡ˆ
- **risk_scenario**: ãƒªã‚¹ã‚¯ã‚·ãƒŠãƒªã‚ªåˆ†æ

### 3.3 ãƒªã‚¹ã‚¯ç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

#### 3.3.1 å¤šå±¤ã‚²ãƒ¼ãƒˆåˆ¤å®š
1. **AIå“è³ªã‚²ãƒ¼ãƒˆ**: p â‰¥ 0.58 ã‹ã¤ RR â‰¥ 1.30
2. **å¸‚å ´ç’°å¢ƒã‚²ãƒ¼ãƒˆ**: ATR%, ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰, æµå‹•æ€§ãƒã‚§ãƒƒã‚¯
3. **ã‚¤ãƒ™ãƒ³ãƒˆçª“ã‚²ãƒ¼ãƒˆ**: çµŒæ¸ˆæŒ‡æ¨™ç™ºè¡¨æ™‚é–“ã®åˆ¶å¾¡
4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚²ãƒ¼ãƒˆ**: é€£æ•—ãƒ»SLAç›£è¦–
5. **é‡è¤‡ææ¡ˆæŠ‘åˆ¶**: åŒæ–¹å‘æœªæ±ºæ¸ˆææ¡ˆã®åˆ¶å¾¡

#### 3.3.2 ãƒªã‚¹ã‚¯ãƒ»ãƒªãƒ¯ãƒ¼ãƒ‰è¨­å®š
- **SL**: 1.2 Ã— ATR14
- **TP**: [0.6, 1.2, 1.8] Ã— ATR14
- **æœ€å¤§ä¿æœ‰æ™‚é–“**: 180åˆ†
- **æ¨å¥¨ã‚µã‚¤ã‚º**: ç¸®å°ã‚±ãƒªãƒ¼ï¼ˆ0.5å€ï¼‰ã€ä¸Šé™ 0.6% equity

### 3.4 é€šçŸ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

#### 3.4.1 Discordé€šçŸ¥ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- **ENTRY PROPOSAL**: ç·‘è‰²ã€ææ¡ˆé…ä¿¡
- **OBSERVE**: é»„è‰²ã€è¦³å¯Ÿæ¨å¥¨
- **æ—¥æ¬¡ã‚¹ãƒ¬ãƒƒãƒ‰**: 06:00 JSTä½œæˆ
- **é€²è¡Œç®¡ç†**: TP/SL/æ™‚é–“åˆ‡ã‚Œã®è¿”ä¿¡

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 4.1 ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«

```sql
CREATE TABLE price_data (
    id BIGSERIAL PRIMARY KEY,
    symbol VARCHAR(20) NOT NULL,
    timeframe VARCHAR(5) NOT NULL,
    timestamp TIMESTAMP WITH TIME ZONE NOT NULL,
    open DECIMAL(10,5) NOT NULL,
    high DECIMAL(10,5) NOT NULL,
    low DECIMAL(10,5) NOT NULL,
    close DECIMAL(10,5) NOT NULL,
    volume BIGINT,
    adjusted_close DECIMAL(10,5),
    dividend_amount DECIMAL(10,5) DEFAULT 0,
    split_coefficient DECIMAL(10,5) DEFAULT 1,
    source VARCHAR(20) DEFAULT 'yahoo_finance',
    data_quality_score DECIMAL(3,2) DEFAULT 1.0,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    
    CONSTRAINT pk_price_data UNIQUE (symbol, timeframe, timestamp)
);
```

### 4.2 LLMåˆ†æçµæœãƒ†ãƒ¼ãƒ–ãƒ«

```sql
CREATE TABLE llm_analysis_results (
    id BIGSERIAL PRIMARY KEY,
    analysis_id UUID NOT NULL DEFAULT gen_random_uuid(),
    symbol VARCHAR(20) NOT NULL,
    timeframe VARCHAR(5) NOT NULL,
    analysis_timestamp TIMESTAMP WITH TIME ZONE NOT NULL,
    analysis_type VARCHAR(50) NOT NULL,
    data_start_time TIMESTAMP WITH TIME ZONE NOT NULL,
    data_end_time TIMESTAMP WITH TIME ZONE NOT NULL,
    data_points_count INTEGER NOT NULL,
    llm_provider VARCHAR(20) NOT NULL,
    llm_model VARCHAR(50) NOT NULL,
    prompt_version VARCHAR(10) NOT NULL,
    analysis_result JSONB NOT NULL,
    confidence_score DECIMAL(3,2),
    processing_time_seconds INTEGER,
    cost_usd DECIMAL(8,4),
    tokens_used INTEGER,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    
    CONSTRAINT pk_llm_analysis UNIQUE (analysis_id)
);
```

### 4.3 ã‚·ã‚°ãƒŠãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«

```sql
CREATE TABLE signals (
    signal_id UUID PRIMARY KEY,
    pair VARCHAR(10) NOT NULL,
    ts TIMESTAMP NOT NULL,
    tf VARCHAR(5) NOT NULL,
    direction VARCHAR(10),
    probability DECIMAL(6,4),
    expected_return DECIMAL(8,2),
    risk_reward DECIMAL(6,3),
    regime VARCHAR(20),
    entry_price DECIMAL(10,5),
    sl_price DECIMAL(10,5),
    tp1_price DECIMAL(10,5),
    tp2_price DECIMAL(10,5),
    tp3_price DECIMAL(10,5),
    gate_status VARCHAR(20),
    gate_reasons JSONB,
    discord_message_id BIGINT,
    notified_at TIMESTAMP,
    status VARCHAR(20) DEFAULT 'ACTIVE',
    created_at TIMESTAMP DEFAULT NOW()
);
```

---

## 5. APIåˆ¶é™å¯¾ç­–

### 5.1 ãƒ¬ãƒ¼ãƒˆåˆ¶é™ç®¡ç†

#### 5.1.1 åˆ¶é™å€¤è¨­å®š
```python
@dataclass
class RateLimitConfig:
    requests_per_minute: int = 45
    requests_per_hour: int = 1200
    requests_per_day: int = 10000
    burst_limit: int = 5
    cooldown_seconds: int = 120
```

#### 5.1.2 ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆåé›†æˆ¦ç•¥
- å„ªå…ˆåº¦ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿åé›†
- å¸‚å ´æ™‚é–“ã‚’è€ƒæ…®ã—ãŸã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°
- ãƒãƒƒãƒå‡¦ç†ã«ã‚ˆã‚‹åŠ¹ç‡åŒ–
- ä»£æ›¿ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®æº–å‚™

### 5.2 ä»£æ›¿ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹æˆ¦ç•¥

#### 5.2.1 ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯é †åº
1. Yahoo Financeï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰
2. Alpha Vantageï¼ˆä»£æ›¿1ï¼‰
3. Finnhubï¼ˆä»£æ›¿2ï¼‰
4. ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ï¼ˆæœ€çµ‚ï¼‰

#### 5.2.2 ã‚³ã‚¹ãƒˆç®¡ç†
- æ—¥æ¬¡ãƒ»æœˆæ¬¡ä½¿ç”¨é‡åˆ¶é™
- ã‚¢ãƒ©ãƒ¼ãƒˆé–¾å€¤è¨­å®š
- ä½¿ç”¨é‡ç›£è¦–ãƒ»ãƒ¬ãƒãƒ¼ãƒˆ

---

## 6. LLMåˆ†æã‚·ã‚¹ãƒ†ãƒ 

### 6.1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€£æºå‹åˆ†æ

#### 6.1.1 åˆ†æãƒ‡ãƒ¼ã‚¿æº–å‚™
```python
class LLMDataPreparator:
    async def prepare_analysis_data(
        self, 
        analysis_type: str, 
        symbol: str = 'USDJPY=X'
    ) -> Dict:
        """åˆ†æç”¨ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™"""
```

#### 6.1.2 åˆ†æã‚¿ã‚¤ãƒ—åˆ¥è¨­å®š
```yaml
analysis_windows:
  market_sentiment:
    timeframes: ['M5', 'M15', 'H1']
    lookback_hours: 24
    max_data_points: 1000
  
  pattern_interpretation:
    timeframes: ['M15', 'H1', 'H4']
    lookback_hours: 72
    max_data_points: 500
  
  risk_scenario:
    timeframes: ['H1', 'H4', 'D1']
    lookback_hours: 168
    max_data_points: 200
```

### 6.2 ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ³

#### 6.2.1 ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
```json
{
  "market_analysis": {
    "system_prompt": "ã‚ãªãŸã¯çµŒé¨“è±Šå¯Œãªç‚ºæ›¿ãƒˆãƒ¬ãƒ¼ãƒ€ãƒ¼ã§ã™ã€‚",
    "user_prompt_template": "ä»¥ä¸‹ã®å¸‚å ´ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã¦ãã ã•ã„ï¼š\n{data_summary}"
  }
}
```

#### 6.2.2 åˆ†æçµæœã®æ§‹é€ åŒ–
- ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰
- ä¿¡é ¼åº¦ï¼ˆ0-100ï¼‰
- ä¸»è¦è¦³å¯Ÿäº‹é …
- ãƒªã‚¹ã‚¯è¦å› 
- æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

---

## 7. Dockerç’°å¢ƒæ§‹ç¯‰

### 7.1 ãƒãƒ«ãƒã‚³ãƒ³ãƒ†ãƒŠæ§‹æˆ

```yaml
# docker-compose.yml
version: '3.8'

services:
  trading-system:
    build:
      context: .
      dockerfile: docker/Dockerfile
      target: development
    container_name: trading-system-dev
    volumes:
      - .:/app
    ports:
      - "8000:8000"
    environment:
      - ENVIRONMENT=development
      - DATABASE_URL=postgresql+asyncpg://postgres:password@postgres:5432/trading_system_dev
    depends_on:
      - postgres
      - redis

  postgres:
    image: postgres:15-alpine
    container_name: trading-postgres-dev
    environment:
      - POSTGRES_DB=trading_system_dev
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=password
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    container_name: trading-redis-dev
    volumes:
      - redis_data:/data
    ports:
      - "6379:6379"
```

### 7.2 ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸Dockerfile

```dockerfile
# docker/Dockerfile
FROM python:3.11-slim as base

WORKDIR /app
ENV PYTHONPATH=/app
ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

FROM base as development
COPY requirements/development.txt .
RUN pip install --no-cache-dir -r development.txt
COPY . .
CMD ["python", "-m", "uvicorn", "api.main:app", "--host", "0.0.0.0", "--port", "8000", "--reload"]

FROM base as production
COPY requirements/production.txt .
RUN pip install --no-cache-dir -r production.txt
RUN groupadd -r appuser && useradd -r -g appuser appuser
COPY . .
RUN chown -R appuser:appuser /app
USER appuser
CMD ["python", "-m", "uvicorn", "api.main:app", "--host", "0.0.0.0", "--port", "8000", "--workers", "4"]
```

### 7.3 é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
#!/bin/bash
# scripts/setup-dev-environment.sh

echo "ğŸš€ é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—é–‹å§‹"

# ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
cp .env.example .env

# Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰
docker-compose build

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®èµ·å‹•
docker-compose up -d postgres redis

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ
docker-compose run --rm trading-system alembic upgrade head

# å…¨ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•
docker-compose up -d

echo "âœ… é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†ï¼"
```

---

## 8. Git/GitHubãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### 8.1 ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

```bash
# ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒ
main                    # æœ¬ç•ªç’°å¢ƒç”¨ï¼ˆä¿è­·ï¼‰
develop                 # é–‹ç™ºçµ±åˆç”¨ï¼ˆä¿è­·ï¼‰

# æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒ
feature/data-collection     # ãƒ‡ãƒ¼ã‚¿åé›†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
feature/llm-analysis        # LLMåˆ†æãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
feature/risk-management     # ãƒªã‚¹ã‚¯ç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

# ãƒªãƒªãƒ¼ã‚¹ãƒ–ãƒ©ãƒ³ãƒ
release/v1.0.0             # ãƒªãƒªãƒ¼ã‚¹æº–å‚™ç”¨

# ãƒ›ãƒƒãƒˆãƒ•ã‚£ãƒƒã‚¯ã‚¹ãƒ–ãƒ©ãƒ³ãƒ
hotfix/critical-bug-fix    # ç·Šæ€¥ä¿®æ­£ç”¨
```

### 8.2 CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

```yaml
# .github/workflows/ci-cd.yml
name: CI/CD Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  code-quality:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      - name: Install dependencies
        run: pip install -r requirements/development.txt
      - name: Code formatting check
        run: black --check modules/ core/ api/ cli/
      - name: Linting
        run: flake8 modules/ core/ api/ cli/

  test:
    runs-on: ubuntu-latest
    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_PASSWORD: postgres
          POSTGRES_DB: trading_system_test
        ports:
          - 5432:5432
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      - name: Install dependencies
        run: pip install -r requirements/development.txt
      - name: Run tests
        run: pytest tests/ -v --cov=modules --cov=core
```

### 8.3 ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´„

```bash
# ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼
<type>(<scope>): <subject>

<body>

<footer>

# ä¾‹
feat(data-collection): add Yahoo Finance rate limiting

Implement comprehensive rate limiting system for Yahoo Finance API
to prevent API quota exhaustion and improve data collection reliability.

- Add RateLimiter class with configurable limits
- Implement exponential backoff for failed requests
- Add monitoring and alerting for rate limit violations

Closes #123
```

---

## 9. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 9.1 ãƒ†ã‚¹ãƒˆéšå±¤æ§‹é€ 

```
/app/tests/
â”œâ”€â”€ conftest.py               # pytestè¨­å®š
â”œâ”€â”€ integration/              # çµ±åˆãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ e2e/                      # E2Eãƒ†ã‚¹ãƒˆ
â””â”€â”€ fixtures/                 # ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£
```

### 9.2 ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ¥ãƒ†ã‚¹ãƒˆ

```python
# modules/llm_analysis/tests/test_unit.py
import pytest
from modules.llm_analysis.core.llm_client import LLMClient

class TestLLMClient:
    @pytest.fixture
    def llm_client(self):
        return LLMClient()
    
    @patch('openai.ChatCompletion.create')
    async def test_openai_request_success(self, mock_create, llm_client):
        mock_create.return_value = {
            'choices': [{'message': {'content': 'Test response'}}]
        }
        
        result = await llm_client.analyze_market_sentiment({
            'price': 150.000,
            'rsi': 65.0,
            'macd': 0.5
        })
        
        assert result['status'] == 'success'
        assert 'content' in result
```

### 9.3 ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

```bash
# å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest modules/*/tests/test_unit.py -v

# çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest tests/integration/ -v

# E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest tests/e2e/ -v

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆ
pytest tests/ --cov=modules --cov=core --cov-report=html
```

---

## 10. é‹ç”¨ãƒ»ç›£è¦–

### 10.1 SLAå®šç¾©ãƒ»ç›£è¦–

```python
SLA_METRICS = {
    'processing_time_m5': {
        'target': 30,        # 30ç§’ä»¥å†…
        'warning': 45,       # è­¦å‘Šé–¾å€¤
        'critical': 60       # ç·Šæ€¥é–¾å€¤
    },
    'data_availability': {
        'target': 99.5,      # 99.5%ä»¥ä¸Š
        'warning': 98.0,
        'critical': 95.0
    },
    'prediction_latency': {
        'target': 5,         # 5ç§’ä»¥å†…
        'warning': 8,
        'critical': 10
    }
}
```

### 10.2 ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

- **Prometheus**: ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†
- **Grafana**: å¯è¦–åŒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- **ã‚¢ãƒ©ãƒ¼ãƒˆ**: Discordé€šçŸ¥
- **ãƒ­ã‚°ç®¡ç†**: æ§‹é€ åŒ–ãƒ­ã‚°

### 10.3 ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ç½å®³å¾©æ—§

#### 10.3.1 ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥
```bash
# æ—¥æ¬¡å·®åˆ†ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
pg_dump --format=custom --no-owner --no-privileges \
    --exclude-table=audit_log \
    $DB_NAME > $BACKUP_DIR/daily_$(date +%Y%m%d).dump

# é€±æ¬¡ãƒ•ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
if [ $(date +%u) -eq 7 ]; then
    pg_dump --format=custom --no-owner --no-privileges \
        $DB_NAME > $BACKUP_DIR/weekly_$(date +%Y%m%d).dump
fi
```

#### 10.3.2 ç½å®³å¾©æ—§ç›®æ¨™
- **RTO (Recovery Time Objective)**: 1æ™‚é–“ä»¥å†…
- **RPO (Recovery Point Objective)**: 1æ™‚é–“ä»¥å†…

---

## 11. å®Ÿè£…è¨ˆç”»

### 11.1 æ®µéšçš„å®Ÿè£…è¨ˆç”»

#### Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆ1-2é€±é–“ï¼‰
- [ ] æ–°ã—ã„ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã®ä½œæˆ
- [ ] ã‚³ã‚¢è¨­å®šã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…
- [ ] å…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®šç¾©
- [ ] åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®æ§‹ç¯‰

#### Phase 2: ãƒ‡ãƒ¼ã‚¿åé›†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆ2-3é€±é–“ï¼‰
- [ ] ãƒ‡ãƒ¼ã‚¿åé›†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®Ÿè£…
- [ ] Yahoo Finance APIé€£æº
- [ ] ãƒ‡ãƒ¼ã‚¿çµ±åˆï¼ˆStitchå‡¦ç†ï¼‰ã®å®Ÿè£…
- [ ] APIåˆ¶é™å¯¾ç­–ã®å®Ÿè£…
- [ ] å˜ä½“ãƒ»çµ±åˆãƒ†ã‚¹ãƒˆã®å®Ÿè£…

#### Phase 3: ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆ2-3é€±é–“ï¼‰
- [ ] ç‰¹å¾´é‡è¨ˆç®—ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®Ÿè£…
- [ ] ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—ã®ç§»è¡Œ
- [ ] æ­£è¦åŒ–ãƒ»å¤‰æ›å‡¦ç†ã®å®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆã®å®Ÿè£…

#### Phase 4: MLæ¨è«–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆ2-3é€±é–“ï¼‰
- [ ] MLæ¨è«–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®Ÿè£…
- [ ] LightGBMãƒ¢ãƒ‡ãƒ«ã®ç§»è¡Œ
- [ ] ç¢ºç‡æ ¡æ­£ã®å®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆã®å®Ÿè£…

#### Phase 5: LLMåˆ†æãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆ3-4é€±é–“ï¼‰
- [ ] LLMåˆ†æãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®Ÿè£…
- [ ] OpenAIã€Anthropicé€£æº
- [ ] ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã®å®Ÿè£…
- [ ] åˆ†æçµæœçµ±åˆã®å®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆã®å®Ÿè£…

#### Phase 6: ãƒªã‚¹ã‚¯ç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆ2-3é€±é–“ï¼‰
- [ ] ãƒªã‚¹ã‚¯ç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®Ÿè£…
- [ ] å¤šå±¤ã‚²ãƒ¼ãƒˆåˆ¤å®šã®ç§»è¡Œ
- [ ] ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚¸ãƒ³ã‚°ã®å®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆã®å®Ÿè£…

#### Phase 7: ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆ2-3é€±é–“ï¼‰
- [ ] ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®Ÿè£…
- [ ] TP/SLè¨ˆç®—ã®å®Ÿè£…
- [ ] ã‚·ãƒŠãƒªã‚ªæ§‹ç¯‰ã®å®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆã®å®Ÿè£…

#### Phase 8: é€šçŸ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆ1-2é€±é–“ï¼‰
- [ ] é€šçŸ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®Ÿè£…
- [ ] Discordé€šçŸ¥ã®ç§»è¡Œ
- [ ] ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã®å®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆã®å®Ÿè£…

#### Phase 9: ç›£è¦–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆ2-3é€±é–“ï¼‰
- [ ] ç›£è¦–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®Ÿè£…
- [ ] SLAç›£è¦–ã®å®Ÿè£…
- [ ] ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã®å®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆã®å®Ÿè£…

#### Phase 10: ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆ2-3é€±é–“ï¼‰
- [ ] ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®Ÿè£…
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«ã®ç§»è¡Œ
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç®¡ç†ã®å®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆã®å®Ÿè£…

#### Phase 11: ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼ˆ2-3é€±é–“ï¼‰
- [ ] ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³ã®å®Ÿè£…
- [ ] ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼ã®å®Ÿè£…
- [ ] ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¹ã®å®Ÿè£…
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆã®å®Ÿè£…

#### Phase 12: APIãƒ»CLIå±¤ï¼ˆ1-2é€±é–“ï¼‰
- [ ] APIå±¤ã®å®Ÿè£…
- [ ] CLIå±¤ã®å®Ÿè£…
- [ ] èªè¨¼ãƒ»èªå¯ã®å®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆã®å®Ÿè£…

#### Phase 13: çµ±åˆãƒ»æœ€é©åŒ–ï¼ˆ2-3é€±é–“ï¼‰
- [ ] å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®çµ±åˆ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [ ] E2Eãƒ†ã‚¹ãƒˆã®å®Ÿè£…
- [ ] æœ¬ç•ªç’°å¢ƒã§ã®æ¤œè¨¼

### 11.2 ãƒªã‚¹ã‚¯ç®¡ç†

#### æŠ€è¡“çš„ãƒªã‚¹ã‚¯
- æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®äº’æ›æ€§å•é¡Œ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶ï¼ˆ30ç§’ä»¥å†…ï¼‰ã®ç¶­æŒ
- ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ç¢ºä¿

#### å¯¾ç­–
- æ®µéšçš„ãªç§»è¡Œã¨ä¸¦è¡Œé‹ç”¨
- åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
- ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»ã®æº–å‚™

#### é‹ç”¨ãƒªã‚¹ã‚¯
- ã‚·ã‚¹ãƒ†ãƒ åœæ­¢æ™‚é–“ã®æœ€å°åŒ–
- ãƒ‡ãƒ¼ã‚¿æå¤±ã®é˜²æ­¢
- é‹ç”¨ãƒãƒ¼ãƒ ã®æ•™è‚²

#### å¯¾ç­–
- ãƒ–ãƒ«ãƒ¼ã‚°ãƒªãƒ¼ãƒ³ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ
- ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®å¾¹åº•
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ã¨ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°

---

## 12. ä»˜éŒ²

### 12.1 è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¾‹

#### 12.1.1 ã‚·ã‚¹ãƒ†ãƒ è¨­å®š
```yaml
# config/base.yaml
system:
  timezone: "Asia/Tokyo"
  base_currency: "JPY"
  target_pair: "USD/JPY"
  timeframe: "M5"
  
data_sources:
  yahoo:
    enabled: true
    timeout: 30
    retry_count: 3
  oanda:
    enabled: true
    account_id: "${OANDA_ACCOUNT_ID}"
    access_token: "${OANDA_ACCESS_TOKEN}"
    environment: "practice"

ml_model:
  model_path: "models/lgbm_usdjpy_m5_2024w15.pkl"
  feature_version: "v2.0"
  calibration_enabled: true
  
risk_management:
  probability_threshold: 0.58
  rr_threshold: 1.30
  max_position_risk: 0.006
  kelly_fraction: 0.5
  
discord:
  token: "${DISCORD_TOKEN}"
  guild_id: 123456789
  channel_id: 987654321
```

#### 12.1.2 LLMåˆ†æè¨­å®š
```yaml
# config/modules/llm_analysis.yaml
llm:
  openai:
    model: "gpt-4o"
    max_tokens: 2000
    temperature: 0.3
    timeout: 30
  
  anthropic:
    model: "claude-3-5-sonnet-20241022"
    max_tokens: 2000
    temperature: 0.3
    timeout: 30

analysis:
  market_sentiment:
    enabled: true
    frequency: "M5"
    provider: "openai"
    
  pattern_interpretation:
    enabled: true
    frequency: "M15"
    provider: "anthropic"
    
  risk_scenario:
    enabled: true
    frequency: "H1"
    provider: "openai"

cost_management:
  daily_limit_usd: 50.0
  monthly_limit_usd: 1000.0
  alert_threshold_percent: 80.0
```

### 12.2 ç’°å¢ƒå¤‰æ•°è¨­å®š

```bash
# .env.example
# ç’°å¢ƒè¨­å®š
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
DATABASE_URL=postgresql+asyncpg://postgres:password@postgres:5432/trading_system_dev
POSTGRES_DB=trading_system_dev
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password

# Redisè¨­å®š
REDIS_URL=redis://redis:6379/0

# LLM APIè¨­å®š
OPENAI_API_KEY=your_openai_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Discordè¨­å®š
DISCORD_WEBHOOK_URL=your_discord_webhook_url_here
DISCORD_TOKEN=your_discord_token_here
```

### 12.3 ä¾¿åˆ©ãªã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
make setup

# é–‹ç™ºç’°å¢ƒèµ·å‹•
make up

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
make test

# ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
make lint

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
make migrate

# ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã‚·ã‚§ãƒ«
make shell

# Jupyter Labèµ·å‹•
make jupyter

# ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰èµ·å‹•
make monitoring
```

### 12.4 å—ã‘å…¥ã‚ŒåŸºæº–ï¼ˆDoDï¼‰

#### æ©Ÿèƒ½è¦ä»¶DoD
- [ ] ææ¡ˆ/è¦³å¯Ÿ/ã‚¹ã‚­ãƒƒãƒ—ã®åˆ¤å®šãŒä»•æ§˜é€šã‚Šå†ç¾ã§ãã‚‹
- [ ] Discordå‡ºåŠ›ã«å¿…é ˆé …ç›®ãŒå…¨ã¦å«ã¾ã‚Œã‚‹
- [ ] ã‚¤ãƒ™ãƒ³ãƒˆçª“ãƒ»ATRå¸¯ãƒ»Spreadåˆ†ä½ã§é©åˆ‡ã«åˆ¶å¾¡ã•ã‚Œã‚‹
- [ ] Stitchåˆ¤å®šãŒé–¾å€¤é€šã‚Šæ©Ÿèƒ½ã—ã€ç›£æŸ»ãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã‚‹
- [ ] SLAè¶…éã§é€šçŸ¥ãƒ»æŠ‘åˆ¶ãŒç™ºå‹•ã™ã‚‹

#### éæ©Ÿèƒ½è¦ä»¶DoD
- [ ] ãƒ‡ãƒ¼ã‚¿å“è³ªãƒ»æ•´åˆæ€§ãŒä¿è¨¼ã•ã‚Œã‚‹
- [ ] ç›£æŸ»ãƒ­ã‚°ãŒé©åˆ‡ã«è¨˜éŒ²ã•ã‚Œã‚‹
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶ï¼ˆ30ç§’ä»¥å†…ï¼‰ã‚’æº€ãŸã™
- [ ] ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆãŒé©åˆ‡ã«è¨­å®šã•ã‚Œã‚‹
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©æ—§æ‰‹é †ãŒæ¤œè¨¼ã•ã‚Œã‚‹

---

**æ–‡æ›¸ç®¡ç†æƒ…å ±**

- æ–‡æ›¸ID: TRD-SPEC-002
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³: v2.0
- ä½œæˆæ—¥: 2025-01-04
- æ‰¿èªè€…: [ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆè€…]
- æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼äºˆå®š: 2025-02-04
