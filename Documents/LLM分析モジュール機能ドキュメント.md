# LLMåˆ†æžãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ©Ÿèƒ½ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

**ä½œæˆæ—¥**: 2025å¹´9æœˆ18æ—¥  
**æœ€çµ‚æ›´æ–°**: 2025å¹´9æœˆ18æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v3.0  
**å¯¾è±¡ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**: `/app/modules/llm_analysis`  
**ç›®çš„**: LLMåˆ†æžãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®åŒ…æ‹¬çš„ãªæ©Ÿèƒ½èª¬æ˜Žã¨ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®è©³ç´°ä»•æ§˜

---

## ðŸ“‹ ç›®æ¬¡

1. [ä½¿ã£ã¦ã„ã‚‹æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#1-ä½¿ã£ã¦ã„ã‚‹æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
2. [æ©Ÿèƒ½ã®æ¦‚è¦](#2-æ©Ÿèƒ½ã®æ¦‚è¦)
3. [èƒŒæ™¯ãƒ»ç›®çš„](#3-èƒŒæ™¯ç›®çš„)
4. [ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ](#4-ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ)
5. [ã§ãã‚‹ã“ã¨ãƒ»åˆ¶é™äº‹é …](#5-ã§ãã‚‹ã“ã¨åˆ¶é™äº‹é …)
6. [ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½¿ç”¨æ™‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³](#6-ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½¿ç”¨æ™‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
7. [é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ](#7-é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ )
8. [ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ è©³ç´°](#8-ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ è©³ç´°)
9. [æ³¨æ„ç‚¹](#9-æ³¨æ„ç‚¹)

---

## 1. ä½¿ã£ã¦ã„ã‚‹æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### 1.1 ã‚³ã‚¢æŠ€è¡“
- **Python 3.8+**: ãƒ¡ã‚¤ãƒ³é–‹ç™ºè¨€èªž
- **asyncio**: éžåŒæœŸå‡¦ç†ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **aiohttp**: éžåŒæœŸHTTPé€šä¿¡
- **PostgreSQL/TimescaleDB**: æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **SQLAlchemy**: ORMï¼ˆéžåŒæœŸå¯¾å¿œï¼‰
- **asyncpg**: PostgreSQLéžåŒæœŸãƒ‰ãƒ©ã‚¤ãƒãƒ¼

### 1.2 LLMãƒ»AIæŠ€è¡“
- **OpenAI GPT-4**: ãƒ¡ã‚¤ãƒ³LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
- **Anthropic Claude**: ä»£æ›¿LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
- **TA-Lib**: ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **yfinance**: Yahoo Finance API
- **Fibonacci Retracement**: ãƒ•ã‚£ãƒœãƒŠãƒƒãƒåˆ†æž

### 1.3 é€šçŸ¥ãƒ»é€šä¿¡
- **Discord Webhook**: é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
- **WebSocket**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡
- **YAML**: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†

### 1.4 ãƒ‡ãƒ¼ã‚¿å‡¦ç†
- **pandas**: ãƒ‡ãƒ¼ã‚¿åˆ†æžãƒ»å‡¦ç†
- **numpy**: æ•°å€¤è¨ˆç®—
- **dataclasses**: ãƒ‡ãƒ¼ã‚¿æ§‹é€ å®šç¾©
- **enum**: åˆ—æŒ™åž‹ç®¡ç†
- **logging**: ãƒ­ã‚°ç®¡ç†

### 1.5 ç›£è¦–ãƒ»é‹ç”¨
- **ç¶™ç¶šçš„ç›£è¦–ãƒ„ãƒ¼ãƒ«**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–
- **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«
- **Discordé€šçŸ¥**: ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ã®è‡ªå‹•é€šçŸ¥

---

## 2. æ©Ÿèƒ½ã®æ¦‚è¦

### 2.1 ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½
LLMï¼ˆLarge Language Modelï¼‰ã‚’ä½¿ç”¨ã—ãŸåŒ…æ‹¬çš„ãªå¸‚å ´åˆ†æžã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è“„ç©ã•ã‚ŒãŸä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«ã€AIæŠ€è¡“ã‚’æ´»ç”¨ã—ã¦å¸‚å ´ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã€ä¾¡æ ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ãƒªã‚¹ã‚¯è©•ä¾¡ã€ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æžã‚’å®Ÿè¡Œã—ã€å£²è²·ã‚·ãƒŠãƒªã‚ªã‚’ç”Ÿæˆãƒ»Discordé…ä¿¡ã™ã‚‹é«˜åº¦ãªåˆ†æžãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚

### 2.2 ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³
- âœ… **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ãƒ‡ãƒ¼ã‚¿åŽé›†å®Œäº†æ™‚ã«è‡ªå‹•ã§ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æžã‚’å®Ÿè¡Œ
- âœ… **éšŽå±¤çš„ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æž**: D1/H4ï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰ã€H1ï¼ˆã‚¾ãƒ¼ãƒ³ï¼‰ã€M5ï¼ˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼‰ã®3æ®µéšŽåˆ†æž
- âœ… **ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹å£²è²·ã‚·ã‚¹ãƒ†ãƒ **: 5ã¤ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ«ãƒ¼ãƒ«ã«ã‚ˆã‚‹è‡ªå‹•ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ
- âœ… **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–**: ç¶™ç¶šçš„ç›£è¦–ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚‹ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ã®å¯è¦–åŒ–
- âœ… **Discordé€šçŸ¥**: ã‚·ãƒŠãƒªã‚ªä½œæˆã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼/ã‚¨ã‚°ã‚¸ãƒƒãƒˆã‚·ã‚°ãƒŠãƒ«ã®è‡ªå‹•é€šçŸ¥
- âœ… **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«**: ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚·ã‚¹ãƒ†ãƒ ã®æ°¸ç¶šåŒ–
- âœ… **ç¶™ç¶šçš„ãƒ‡ãƒ¼ã‚¿åŽé›†**: 5åˆ†é–“éš”ã§ã®è‡ªå‹•ãƒ‡ãƒ¼ã‚¿åŽé›†ã¨ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ

### 2.3 ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
```
ãƒ‡ãƒ¼ã‚¿åŽé›†å®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆ â†’ ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æž â†’ ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹åˆ¤å®š â†’ ã‚·ãƒŠãƒªã‚ªç®¡ç† â†’ Discordé…ä¿¡
       â†“                    â†“              â†“              â†“
   ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«      éšŽå±¤çš„åˆ†æž      ã‚¨ãƒ³ãƒˆãƒªãƒ¼/ã‚¨ã‚°ã‚¸ãƒƒãƒˆ    ã‚¹ãƒŠãƒƒãƒ—ä¿å­˜
       â†“                    â†“              â†“              â†“
   ã‚¤ãƒ™ãƒ³ãƒˆç›£è¦–        ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—    ãƒ«ãƒ¼ãƒ«éµå®ˆåˆ¤å®š      æ—¥æ¬¡è©•ä¾¡ãƒ»æ”¹å–„
       â†“                    â†“              â†“              â†“
   ç¶™ç¶šçš„ç›£è¦–ãƒ„ãƒ¼ãƒ«      åˆ†æžçµæžœä¿å­˜      ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹è¿½è·¡    ãƒ«ãƒ¼ãƒ«æ”¹å–„ææ¡ˆ
```

---

## 3. èƒŒæ™¯ãƒ»ç›®çš„

### 3.1 èƒŒæ™¯
- ç‚ºæ›¿åˆ†æžã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å¿…è¦ãªé«˜åº¦ãªå¸‚å ´åˆ†æž
- å¤§é‡ã®å¸‚å ´ãƒ‡ãƒ¼ã‚¿ã®åŠ¹çŽ‡çš„ãªè§£é‡ˆã¨åˆ†æž
- äººé–“ã®åˆ¤æ–­ã‚’è£œå®Œã™ã‚‹AIæŠ€è¡“ã®æ´»ç”¨
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã®å¸‚å ´çŠ¶æ³ã®æŠŠæ¡ã¨é€šçŸ¥
- ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹å£²è²·ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æº
- ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚‹åŠ¹çŽ‡çš„ãªå‡¦ç†

### 3.2 ç›®çš„
- AIæŠ€è¡“ã‚’æ´»ç”¨ã—ãŸé«˜ç²¾åº¦ãªå¸‚å ´åˆ†æž
- è¤‡æ•°ã®åˆ†æžã‚¿ã‚¤ãƒ—ã®çµ±åˆã¨æœ€é©åŒ–
- åˆ†æžçµæžœã®å“è³ªç®¡ç†ã¨ä¿¡é ¼æ€§å‘ä¸Š
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ã¨ãƒ¬ãƒãƒ¼ãƒˆé…ä¿¡
- ç¶™ç¶šçš„ãªåˆ†æžãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ã®æ”¹å–„
- ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã«ã‚ˆã‚‹è‡ªå‹•åŒ–ã¨åŠ¹çŽ‡åŒ–

---

## 4. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### 4.1 ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹å±¤

#### 4.1.1 LLMåˆ†æžã‚µãƒ¼ãƒ“ã‚¹ (`LLMAnalysisService`)
```python
# çµ±åˆåˆ†æžã‚µãƒ¼ãƒ“ã‚¹
- è¤‡æ•°åˆ†æžã‚¿ã‚¤ãƒ—ã®ç®¡ç†
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€£æº
- å“è³ªç®¡ç†çµ±åˆ
- ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½
```

#### 4.1.2 ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æžã‚µãƒ¼ãƒ“ã‚¹ (`TechnicalAnalysisService`)
```python
# ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æžã‚µãƒ¼ãƒ“ã‚¹
- ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•åˆ†æž
- ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³é€£æº
- ã‚·ãƒŠãƒªã‚ªç®¡ç†
- Discordé€šçŸ¥
```

#### 4.1.3 åˆ†æžã‚µãƒ¼ãƒ“ã‚¹ (`AnalysisService`)
```python
# åˆ†æžã‚µãƒ¼ãƒ“ã‚¹
- ã‚¤ãƒ™ãƒ³ãƒˆç›£è¦–ãƒ»å‡¦ç†
- ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æžå®Ÿè¡Œ
- ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹åˆ¤å®š
- çµæžœä¿å­˜ãƒ»é€šçŸ¥
```

### 4.2 åˆ†æžã‚¨ãƒ³ã‚¸ãƒ³å±¤

#### 4.2.1 åˆ†æžã‚¨ãƒ³ã‚¸ãƒ³ (`AnalysisEngine`)
```python
# åˆ†æžå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³
- åŒ…æ‹¬çš„åˆ†æž
- ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æž
- ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æž
- ãƒªã‚¹ã‚¯åˆ†æž
```

#### 4.2.2 ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³ (`RuleBasedEngine`)
```python
# ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹å£²è²·ã‚¨ãƒ³ã‚¸ãƒ³
- ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ¡ä»¶è©•ä¾¡
- ã‚¨ã‚°ã‚¸ãƒƒãƒˆæ¡ä»¶è©•ä¾¡
- 5ã¤ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ«ãƒ¼ãƒ«
- ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢è¨ˆç®—
```

#### 4.2.3 ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«è¨ˆç®—å™¨ (`TechnicalCalculator`)
```python
# ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—å™¨
- éšŽå±¤çš„ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æž
- 40å€‹ã®æŒ‡æ¨™è¨ˆç®—
- ãƒ•ã‚£ãƒœãƒŠãƒƒãƒåˆ†æž
- ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯
```

### 4.3 ãƒ‡ãƒ¼ã‚¿å‡¦ç†å±¤

#### 4.3.1 ãƒ‡ãƒ¼ã‚¿æº–å‚™å™¨ (`LLMDataPreparator`)
```python
# åˆ†æžãƒ‡ãƒ¼ã‚¿æº–å‚™
- ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿çµ±åˆ
- ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—
- ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
- å“è³ªãƒã‚§ãƒƒã‚¯
- éšŽå±¤çš„åˆ†æžãƒ‡ãƒ¼ã‚¿æº–å‚™
```

#### 4.3.2 å“è³ªç®¡ç†ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ (`QualityController`)
```python
# å“è³ªç®¡ç†
- åˆ†æžçµæžœè©•ä¾¡
- ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢è¨ˆç®—
- å“è³ªãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- æ”¹å–„ææ¡ˆ
```

### 4.4 ç®¡ç†ãƒ»åˆ¶å¾¡å±¤

#### 4.4.1 ã‚·ãƒŠãƒªã‚ªç®¡ç† (`ScenarioManager`)
```python
# ã‚·ãƒŠãƒªã‚ªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
- ã‚·ãƒŠãƒªã‚ªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†
- ã‚¨ãƒ³ãƒˆãƒªãƒ¼/ã‚¨ã‚°ã‚¸ãƒƒãƒˆå®Ÿè¡Œ
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¿½è·¡
- æœ‰åŠ¹æœŸé™ç®¡ç†
```

#### 4.4.2 ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆç®¡ç† (`SnapshotManager`)
```python
# ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆç®¡ç†
- ã‚¨ãƒ³ãƒˆãƒªãƒ¼/ã‚¨ã‚°ã‚¸ãƒƒãƒˆã‚¹ãƒŠãƒƒãƒ—
- ãƒˆãƒ¬ãƒ¼ãƒ‰å±¥æ­´ç®¡ç†
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹è¿½è·¡
```

### 4.5 é€šçŸ¥ãƒ»é€šä¿¡å±¤

#### 4.5.1 Discordé€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ  (`DiscordNotifier`)
```python
# é€šçŸ¥é…ä¿¡
- ã‚·ãƒŠãƒªã‚ªé€šçŸ¥
- ã‚·ã‚°ãƒŠãƒ«é€šçŸ¥
- ãƒ¬ãƒãƒ¼ãƒˆé…ä¿¡
- ã‚¨ãƒ©ãƒ¼ã‚¢ãƒ©ãƒ¼ãƒˆ
```

#### 4.5.2 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒžãƒƒã‚¿ãƒ¼ (`MessageFormatter`)
```python
# ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ
- ãƒªãƒƒãƒãªåŸ‹ã‚è¾¼ã¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- æ§‹é€ åŒ–ã•ã‚ŒãŸé€šçŸ¥
- ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºå¯èƒ½ãªãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ
```

### 4.6 å¤–éƒ¨é€£æºå±¤

#### 4.6.1 LLMã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (`LLMClient`)
```python
# LLM APIé€šä¿¡
- è¤‡æ•°ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¯¾å¿œ
- éžåŒæœŸé€šä¿¡
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™ç®¡ç†
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```

#### 4.6.2 ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (`YahooFinanceStreamClient`)
```python
# ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
- Yahoo Finance Stream API
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿
- èªè¨¼ä¸è¦è¨­è¨ˆ
- ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
```

---

## 5. ã§ãã‚‹ã“ã¨ãƒ»åˆ¶é™äº‹é …

### 5.1 ã§ãã‚‹ã“ã¨

#### 5.1.1 åˆ†æžæ©Ÿèƒ½
- **åŒ…æ‹¬çš„å¸‚å ´åˆ†æž**: ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ãƒªã‚¹ã‚¯ã€ãƒˆãƒ¬ãƒ³ãƒ‰ã®çµ±åˆåˆ†æž
- **éšŽå±¤çš„ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æž**: D1/H4ï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰ã€H1ï¼ˆã‚¾ãƒ¼ãƒ³ï¼‰ã€M5ï¼ˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼‰ã®3æ®µéšŽåˆ†æž
- **ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹å£²è²·**: 5ã¤ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ«ãƒ¼ãƒ«ã«ã‚ˆã‚‹è‡ªå‹•ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ
- **40å€‹ã®ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™**: ç§»å‹•å¹³å‡ã€ã‚ªã‚·ãƒ¬ãƒ¼ã‚¿ãƒ¼ã€ãƒˆãƒ¬ãƒ³ãƒ‰ã€ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã€ãƒœãƒªãƒ¥ãƒ¼ãƒ ã€ãƒ•ã‚£ãƒœãƒŠãƒƒãƒ
- **ãƒ‡ãƒ¼ã‚¿å“è³ªç®¡ç†**: 5è¦ç´ ã«ã‚ˆã‚‹å“è³ªã‚¹ã‚³ã‚¢è¨ˆç®—ï¼ˆç¾åœ¨1.00ã®å®Œç’§ãªå“è³ªï¼‰

#### 5.1.2 è‡ªå‹•åŒ–æ©Ÿèƒ½
- **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•åˆ†æž**: ãƒ‡ãƒ¼ã‚¿åŽé›†å®Œäº†æ™‚ã®è‡ªå‹•ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æžå®Ÿè¡Œ
- **ã‚·ãƒŠãƒªã‚ªç®¡ç†**: ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‹ã‚‰ã‚¨ã‚°ã‚¸ãƒƒãƒˆã¾ã§ã®å®Œå…¨ãªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†
- **Discordé€šçŸ¥**: ãƒªãƒƒãƒãªåŸ‹ã‚è¾¼ã¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã®é€šçŸ¥é…ä¿¡
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–**: ç¶™ç¶šçš„ç›£è¦–ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚‹ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ã®å¯è¦–åŒ–

#### 5.1.3 ç®¡ç†æ©Ÿèƒ½
- **å“è³ªç®¡ç†**: åˆ†æžçµæžœã®è‡ªå‹•å“è³ªè©•ä¾¡ã¨æ”¹å–„ææ¡ˆ
- **å±¥æ­´åˆ†æž**: éŽåŽ»ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãåˆ†æžã¨ãƒˆãƒ¬ãƒ³ãƒ‰äºˆæ¸¬
- **ãƒãƒƒãƒå‡¦ç†**: è¤‡æ•°ã‚·ãƒ³ãƒœãƒ«ãƒ»æ™‚é–“è»¸ã®ä¸¦è¡Œåˆ†æž
- **ã‚ªãƒ³ãƒ‡ãƒžãƒ³ãƒ‰åˆ†æž**: å¿…è¦ã«å¿œã˜ãŸå³åº§ã®åˆ†æžå®Ÿè¡Œ
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ç›£è¦–**: åˆ†æžå“è³ªã¨ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ã®ç›£è¦–

#### 5.1.4 é€£æºæ©Ÿèƒ½
- **è¤‡æ•°LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¯¾å¿œ**: OpenAIã€Anthropicã€Googleç­‰ã®æŸ”è»Ÿãªé¸æŠž
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€£æº**: TimescaleDBã¨ã®å®Œå…¨çµ±åˆ
- **å¤–éƒ¨APIé€£æº**: Yahoo Financeã€Discordç­‰ã®å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æº

### 5.2 åˆ¶é™äº‹é …

#### 5.2.1 æŠ€è¡“çš„åˆ¶é™
- **LLM APIä¾å­˜**: å¤–éƒ¨APIã®åˆ¶é™ã¨ã‚³ã‚¹ãƒˆã«ä¾å­˜
- **ãƒ‡ãƒ¼ã‚¿å“è³ªä¾å­˜**: å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®å“è³ªãŒåˆ†æžçµæžœã«å½±éŸ¿
- **å‡¦ç†æ™‚é–“**: è¤‡é›‘ãªåˆ†æžã«ã¯æ™‚é–“ãŒã‹ã‹ã‚‹å ´åˆãŒã‚ã‚‹
- **APIåˆ¶é™**: LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™

#### 5.2.2 é‹ç”¨åˆ¶é™
- **ã‚³ã‚¹ãƒˆåˆ¶é™**: APIä½¿ç”¨æ–™é‡‘ã®åˆ¶é™
- **è¨€èªžåˆ¶é™**: ä¸»ã«è‹±èªžã§ã®åˆ†æžã«æœ€é©åŒ–
- **ã‚·ã‚°ãƒŠãƒ«ç”ŸæˆçŽ‡**: ç¾åœ¨0%ï¼ˆæ¡ä»¶ãŒåŽ³ã—ã™ãŽã‚‹å¯èƒ½æ€§ï¼‰
- **ãƒ‘ã‚¿ãƒ¼ãƒ³å¤šæ§˜æ€§**: 5ã¤ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã¿

---

## 6. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½¿ç”¨æ™‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³

### 6.1 LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¨­å®š
```python
# OpenAIè¨­å®š
llm_config = LLMConfig(
    provider=LLMProvider.OPENAI,
    model_name="gpt-4",
    max_tokens=4000,
    temperature=0.1
)

# Anthropicè¨­å®š
llm_config = LLMConfig(
    provider=LLMProvider.ANTHROPIC,
    model_name="claude-3-sonnet",
    max_tokens=4000,
    temperature=0.1
)
```

### 6.2 åˆ†æžã‚¿ã‚¤ãƒ—è¨­å®š
```python
# åˆ†æžã‚¿ã‚¤ãƒ—
analysis_types = [
    AnalysisType.MARKET_SENTIMENT,    # å¸‚å ´ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆ
    AnalysisType.PRICE_PATTERN,       # ä¾¡æ ¼ãƒ‘ã‚¿ãƒ¼ãƒ³
    AnalysisType.RISK_ASSESSMENT,     # ãƒªã‚¹ã‚¯è©•ä¾¡
    AnalysisType.TREND_ANALYSIS       # ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æž
]
```

### 6.3 åˆ†æžé »åº¦è¨­å®š
```python
# åˆ†æžé »åº¦
frequencies = [
    AnalysisFrequency.REAL_TIME,      # ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ 
    AnalysisFrequency.HOURLY,         # æ™‚é–“åˆ¥
    AnalysisFrequency.DAILY,          # æ—¥åˆ¥
    AnalysisFrequency.WEEKLY,         # é€±åˆ¥
    AnalysisFrequency.ON_DEMAND       # ã‚ªãƒ³ãƒ‡ãƒžãƒ³ãƒ‰
]
```

### 6.4 ãƒ‡ãƒ¼ã‚¿æº–å‚™è¨­å®š
```python
# ãƒ‡ãƒ¼ã‚¿æº–å‚™è¨­å®š
data_config = DataPreparationConfig(
    enable_data_aggregation=True,
    aggregation_window_minutes=60,
    enable_outlier_detection=True,
    outlier_threshold=3.0,
    enable_missing_data_interpolation=True,
    interpolation_method="linear"
)
```

### 6.5 å“è³ªç®¡ç†è¨­å®š
```python
# å“è³ªç®¡ç†è¨­å®š
quality_config = QualityControlConfig(
    enable_quality_scoring=True,
    quality_threshold=0.8,
    enable_consistency_check=True,
    consistency_threshold=0.9
)
```

### 6.6 Discordé€šçŸ¥è¨­å®š
```python
# Discordé€šçŸ¥è¨­å®š
notification_settings = {
    "scenario_created": True,
    "rule_evaluation": True,
    "entry_signals": True,
    "exit_signals": True,
    "daily_reports": True,
    "weekly_reports": True,
    "error_alerts": True
}
```

### 6.7 ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹è¨­å®š
```python
# ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹è¨­å®š
rule_config = {
    "active_rules": [
        "pullback_buy",
        "reversal_sell", 
        "trend_follow_sell",
        "strong_downtrend_sell"
    ],
    "score_threshold": 0.7,
    "risk_constraints": {
        "max_daily_trades": 5,
        "max_daily_risk": 3.0,
        "max_hold_time": 240
    }
}
```

---

## 7. é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
/app/modules/llm_analysis/
â”œâ”€â”€ main.py                          # ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ settings.py                  # è¨­å®šç®¡ç†
â”‚   â””â”€â”€ rules.yaml                   # ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹è¨­å®š
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ llm_analysis_service.py      # ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ technical_analysis_service.py # ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æžã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ analysis_engine/             # åˆ†æžã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”‚   â”œâ”€â”€ analysis_engine.py
â”‚   â”‚   â”œâ”€â”€ market_analyzer.py
â”‚   â”‚   â”œâ”€â”€ pattern_analyzer.py
â”‚   â”‚   â”œâ”€â”€ risk_analyzer.py
â”‚   â”‚   â””â”€â”€ sentiment_analyzer.py
â”‚   â”œâ”€â”€ llm_client/                  # LLMã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ llm_client.py
â”‚   â”‚   â”œâ”€â”€ openai_client.py
â”‚   â”‚   â””â”€â”€ anthropic_client.py
â”‚   â”œâ”€â”€ data_preparation/            # ãƒ‡ãƒ¼ã‚¿æº–å‚™
â”‚   â”‚   â”œâ”€â”€ data_preparator.py
â”‚   â”‚   â”œâ”€â”€ data_validator.py
â”‚   â”‚   â””â”€â”€ feature_engineer.py
â”‚   â”œâ”€â”€ quality_control/             # å“è³ªç®¡ç†
â”‚   â”‚   â”œâ”€â”€ quality_controller.py
â”‚   â”‚   â”œâ”€â”€ quality_metrics.py
â”‚   â”‚   â””â”€â”€ quality_validator.py
â”‚   â”œâ”€â”€ rule_engine.py               # ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ scenario_manager.py          # ã‚·ãƒŠãƒªã‚ªç®¡ç†
â”‚   â”œâ”€â”€ technical_calculator.py      # ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—
â”‚   â”œâ”€â”€ snapshot_manager.py          # ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆç®¡ç†
â”‚   â””â”€â”€ trading_pipeline.py          # å–å¼•ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
â”œâ”€â”€ notification/                    # é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ discord_notifier.py
â”‚   â””â”€â”€ message_formatter.py
â”œâ”€â”€ evaluation/                      # è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â””â”€â”€ daily_evaluator.py
â”œâ”€â”€ llm/                            # LLMå‡¦ç†
â”‚   â”œâ”€â”€ llm_analyzer.py
â”‚   â”œâ”€â”€ language_processor.py
â”‚   â”œâ”€â”€ journal_generator.py
â”‚   â””â”€â”€ improvement_advisor.py
â”œâ”€â”€ providers/                      # ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
â”‚   â”œâ”€â”€ base_provider.py
â”‚   â”œâ”€â”€ oanda_stream_client.py
â”‚   â””â”€â”€ yahoo_finance_stream_client.py
â”œâ”€â”€ services/                       # ã‚µãƒ¼ãƒ“ã‚¹å±¤
â”‚   â””â”€â”€ analysis_service.py         # åˆ†æžã‚µãƒ¼ãƒ“ã‚¹
â”œâ”€â”€ orchestration/                  # ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â””â”€â”€ trading_pipeline.py         # å–å¼•ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆ
â”œâ”€â”€ tests/                          # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ test_llm_analyzer.py
â”‚   â”œâ”€â”€ test_analysis_engine.py
â”‚   â”œâ”€â”€ test_discord_notifier.py
â”‚   â”œâ”€â”€ test_rule_engine.py
â”‚   â”œâ”€â”€ test_technical_calculator.py
â”‚   â””â”€â”€ test_technical_values.py
â”œâ”€â”€ README.md                       # åŸºæœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ LLMåˆ†æžãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ©Ÿèƒ½ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ.md  # ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â””â”€â”€ ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜æ›¸.md    # ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºè©³ç´°ä»•æ§˜
```

---

## 8. ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ è©³ç´°

### 8.1 ç¶™ç¶šçš„ç›£è¦–ãƒ„ãƒ¼ãƒ« (`continuous_monitor.py`)

#### 8.1.1 æ©Ÿèƒ½æ¦‚è¦
```python
class ContinuousMonitor:
    """ç¶™ç¶šçš„ç›£è¦–ã‚¯ãƒ©ã‚¹"""
    
    def __init__(self, interval_seconds: int = 30):
        self.interval_seconds = interval_seconds
        self.is_running = False
        # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶š
        # ã‚·ã‚°ãƒŠãƒ«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼è¨­å®š
```

#### 8.1.2 ç›£è¦–é …ç›®
- **ðŸ“ˆ ãƒ‡ãƒ¼ã‚¿åŽé›†çŠ¶æ³**: å„æ™‚é–“è¶³ã®æœ€æ–°ãƒ‡ãƒ¼ã‚¿æ™‚åˆ»ã¨ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°
- **ðŸ“¢ ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†çŠ¶æ³**: ãƒ‡ãƒ¼ã‚¿åŽé›†å®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†çŠ¶æ³
- **ðŸ” åˆ†æžçµæžœ**: ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æžã®å®Ÿè¡Œçµæžœã¨æ¡ä»¶åˆè‡´çŠ¶æ³
- **ðŸŽ¯ ã‚·ãƒŠãƒªã‚ªçŠ¶æ³**: ä½œæˆã•ã‚ŒãŸã‚·ãƒŠãƒªã‚ªã®æƒ…å ±ã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
- **ðŸ’š ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹**: å…¨ä½“çš„ãªã‚·ã‚¹ãƒ†ãƒ ã®å¥å…¨æ€§

#### 8.1.3 ç›£è¦–ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½¿ç”¨æ–¹æ³•
```bash
# ç¶™ç¶šçš„ç›£è¦–ãƒ„ãƒ¼ãƒ«ã®èµ·å‹•
cd /app
python continuous_monitor.py

# ç›£è¦–é–“éš”ã®å¤‰æ›´ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ30ç§’ï¼‰
python continuous_monitor.py --interval 10
```

#### 8.1.4 ç›£è¦–å‡ºåŠ›ä¾‹
```
ðŸ”„ ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–é–‹å§‹ (é–“éš”: 30ç§’)
ðŸ“Š ãƒ‡ãƒ¼ã‚¿åŽé›†çŠ¶æ³:
  - 5mè¶³: 2025-09-18 11:19:18 JST (æœ€æ–°)
  - 15mè¶³: 2025-09-18 11:15:00 JST (æœ€æ–°)
  - 1hè¶³: 2025-09-18 11:00:00 JST (æœ€æ–°)
  - 4hè¶³: 2025-09-18 08:00:00 JST (æœ€æ–°)
  - 1dè¶³: 2025-09-18 00:00:00 JST (æœ€æ–°)

ðŸ“¢ ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†çŠ¶æ³:
  - å‡¦ç†æ¸ˆã¿: 147ä»¶
  - å¾…æ©Ÿä¸­: 0ä»¶
  - ã‚¨ãƒ©ãƒ¼: 0ä»¶

ðŸ” åˆ†æžçµæžœ:
  - æœ€æ–°åˆ†æž: 2025-09-18 11:19:23 JST
  - æ¡ä»¶åˆè‡´: False
  - ã‚·ã‚°ãƒŠãƒ«æ•°: 0

ðŸŽ¯ ã‚·ãƒŠãƒªã‚ªçŠ¶æ³:
  - ã‚¢ã‚¯ãƒ†ã‚£ãƒ–: 0ä»¶
  - å®Œäº†: 0ä»¶
  - æœŸé™åˆ‡ã‚Œ: 0ä»¶

ðŸ’š ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹: æ­£å¸¸
```

### 8.2 ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚·ã‚¹ãƒ†ãƒ  (`start_event_driven_system.py`)

#### 8.2.1 æ©Ÿèƒ½æ¦‚è¦
```python
class EventDrivenSystem:
    """å®Œå…¨ãªã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚·ã‚¹ãƒ†ãƒ """
    
    def __init__(self, symbol: str = "USDJPY=X"):
        self.symbol = symbol
        self.data_collection_daemon = DataCollectionDaemon(symbol=symbol, interval_minutes=5)
        self.analysis_service = AnalysisService(symbol=symbol)
        self.is_running = False
```

#### 8.2.2 ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½¿ç”¨æ–¹æ³•
```bash
# ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚·ã‚¹ãƒ†ãƒ ã®èµ·å‹•
cd /app
python start_event_driven_system.py

# ã‚·ãƒ³ãƒœãƒ«ã®å¤‰æ›´
python start_event_driven_system.py --symbol EURJPY=X
```

#### 8.2.3 ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ
- **ãƒ‡ãƒ¼ã‚¿åŽé›†ãƒ‡ãƒ¼ãƒ¢ãƒ³**: 5åˆ†é–“éš”ã§ãƒ‡ãƒ¼ã‚¿åŽé›†ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
- **åˆ†æžã‚µãƒ¼ãƒ“ã‚¹**: ã‚¤ãƒ™ãƒ³ãƒˆç›£è¦–ãƒ»ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æžå®Ÿè¡Œ
- **ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³**: ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ¡ä»¶è©•ä¾¡ãƒ»ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ
- **Discordé€šçŸ¥**: ã‚·ãƒŠãƒªã‚ªä½œæˆãƒ»ã‚·ã‚°ãƒŠãƒ«é€šçŸ¥

### 8.3 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«

#### 8.3.1 ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 
```sql
CREATE TABLE events (
    id SERIAL PRIMARY KEY,
    event_type VARCHAR(50) NOT NULL,
    symbol VARCHAR(20) NOT NULL,
    event_data JSONB NOT NULL,
    processed BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    processed_at TIMESTAMP WITH TIME ZONE
);
```

#### 8.3.2 ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—
- **data_collection_completed**: ãƒ‡ãƒ¼ã‚¿åŽé›†å®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆ
- **technical_analysis_completed**: ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æžå®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆ
- **scenario_created**: ã‚·ãƒŠãƒªã‚ªä½œæˆã‚¤ãƒ™ãƒ³ãƒˆ
- **entry_signal**: ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚·ã‚°ãƒŠãƒ«ã‚¤ãƒ™ãƒ³ãƒˆ
- **exit_signal**: ã‚¨ã‚°ã‚¸ãƒƒãƒˆã‚·ã‚°ãƒŠãƒ«ã‚¤ãƒ™ãƒ³ãƒˆ

#### 8.3.3 ã‚¤ãƒ™ãƒ³ãƒˆç›£è¦–ã‚¯ã‚¨ãƒª
```sql
-- æœªå‡¦ç†ã‚¤ãƒ™ãƒ³ãƒˆã®ç¢ºèª
SELECT COUNT(*) FROM events WHERE processed = FALSE;

-- æœ€æ–°ã‚¤ãƒ™ãƒ³ãƒˆã®ç¢ºèª
SELECT * FROM events ORDER BY created_at DESC LIMIT 10;

-- ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†çŠ¶æ³ã®ç¢ºèª
SELECT event_type, COUNT(*) as count, 
       COUNT(CASE WHEN processed THEN 1 END) as processed_count
FROM events 
GROUP BY event_type;
```

### 8.4 ç›£è¦–ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®è©³ç´°æ©Ÿèƒ½

#### 8.4.1 ãƒ‡ãƒ¼ã‚¿åŽé›†çŠ¶æ³ç›£è¦–
```python
async def check_data_collection_status(self):
    """ãƒ‡ãƒ¼ã‚¿åŽé›†çŠ¶æ³ã‚’ãƒã‚§ãƒƒã‚¯"""
    timeframes = ['5m', '15m', '1h', '4h', '1d']
    status = {}
    
    for tf in timeframes:
        query = """
        SELECT MAX(timestamp) as latest_time, COUNT(*) as record_count
        FROM price_data 
        WHERE timeframe = $1 AND symbol = $2
        """
        result = await self.connection_manager.fetch_one(query, tf, self.symbol)
        status[tf] = {
            'latest_time': result['latest_time'],
            'record_count': result['record_count']
        }
    
    return status
```

#### 8.4.2 ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†çŠ¶æ³ç›£è¦–
```python
async def check_event_processing_status(self):
    """ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†çŠ¶æ³ã‚’ãƒã‚§ãƒƒã‚¯"""
    query = """
    SELECT 
        COUNT(*) as total_events,
        COUNT(CASE WHEN processed THEN 1 END) as processed_events,
        COUNT(CASE WHEN NOT processed THEN 1 END) as pending_events
    FROM events
    WHERE created_at >= NOW() - INTERVAL '1 hour'
    """
    result = await self.connection_manager.fetch_one(query)
    return result
```

#### 8.4.3 åˆ†æžçµæžœç›£è¦–
```python
async def check_analysis_results(self):
    """åˆ†æžçµæžœã‚’ãƒã‚§ãƒƒã‚¯"""
    query = """
    SELECT 
        MAX(created_at) as latest_analysis,
        COUNT(*) as total_analyses,
        COUNT(CASE WHEN conditions_met THEN 1 END) as successful_analyses
    FROM llm_analysis_results
    WHERE created_at >= NOW() - INTERVAL '1 hour'
    """
    result = await self.connection_manager.fetch_one(query)
    return result
```

### 8.5 ç›£è¦–ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½

#### 8.5.1 ã‚¢ãƒ©ãƒ¼ãƒˆæ¡ä»¶
- **ãƒ‡ãƒ¼ã‚¿æ›´æ–°åœæ­¢**: 5åˆ†ä»¥ä¸Šãƒ‡ãƒ¼ã‚¿ãŒæ›´æ–°ã•ã‚Œãªã„
- **ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†é…å»¶**: 10åˆ†ä»¥ä¸Šæœªå‡¦ç†ã‚¤ãƒ™ãƒ³ãƒˆãŒå­˜åœ¨
- **åˆ†æžã‚¨ãƒ©ãƒ¼**: é€£ç¶šã—ã¦åˆ†æžãŒå¤±æ•—
- **ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼**: é‡å¤§ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ

#### 8.5.2 ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥
```python
async def send_alert(self, alert_type: str, message: str):
    """ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ã‚’é€ä¿¡"""
    if self.discord_notifier:
        await self.discord_notifier.send_error_alert(
            alert_type=alert_type,
            message=message,
            timestamp=datetime.now(timezone.utc)
        )
```

---

## 9. æ³¨æ„ç‚¹

### 9.1 é‹ç”¨æ™‚ã®æ³¨æ„ç‚¹
1. **APIåˆ¶é™**: LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚’è¶…ãˆãªã„ã‚ˆã†æ³¨æ„
2. **ã‚³ã‚¹ãƒˆç®¡ç†**: APIä½¿ç”¨æ–™é‡‘ã®ç›£è¦–ã¨äºˆç®—ç®¡ç†
3. **ãƒ‡ãƒ¼ã‚¿å“è³ª**: å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®å“è³ªãŒåˆ†æžçµæžœã«ç›´æŽ¥å½±éŸ¿
4. **åˆ†æžé »åº¦**: éŽåº¦ãªåˆ†æžã«ã‚ˆã‚‹APIåˆ¶é™ã®å›žé¿
5. **é€šçŸ¥è¨­å®š**: Discordé€šçŸ¥ã®é©åˆ‡ãªè¨­å®šã¨ã‚¹ãƒ‘ãƒ é˜²æ­¢
6. **ç›£è¦–ç¶™ç¶š**: ç¶™ç¶šçš„ç›£è¦–ãƒ„ãƒ¼ãƒ«ã®å®‰å®šç¨¼åƒç¢ºä¿

### 9.2 é–‹ç™ºæ™‚ã®æ³¨æ„ç‚¹
1. **éžåŒæœŸå‡¦ç†**: asyncioã®é©åˆ‡ãªä½¿ç”¨ã¨ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†
2. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: LLM APIã®ä¸å®‰å®šæ€§ã¸ã®å¯¾å¿œ
3. **è¨­å®šç®¡ç†**: ç’°å¢ƒå¤‰æ•°ã¨è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®é©åˆ‡ãªç®¡ç†
4. **ãƒ†ã‚¹ãƒˆ**: ãƒ¢ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ãŸAPIåˆ¶é™ã®ãƒ†ã‚¹ãƒˆ
5. **ãƒ­ã‚°ç®¡ç†**: è©³ç´°ãªãƒ­ã‚°å‡ºåŠ›ã¨ãƒ‡ãƒãƒƒã‚°æƒ…å ±
6. **ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†**: ã‚¤ãƒ™ãƒ³ãƒˆã®é‡è¤‡å‡¦ç†ã¨ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯å›žé¿

### 9.3 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …
1. **APIèªè¨¼**: LLM APIã‚­ãƒ¼ã®é©åˆ‡ãªç®¡ç†ã¨ä¿è­·
2. **ãƒ‡ãƒ¼ã‚¿ä¿è­·**: åˆ†æžãƒ‡ãƒ¼ã‚¿ã®æ©Ÿå¯†æ€§ç¢ºä¿
3. **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**: Discord Webhookã®é©åˆ‡ãªè¨­å®š
4. **ãƒ­ã‚°æƒ…å ±**: æ©Ÿå¯†æƒ…å ±ã®ãƒ­ã‚°å‡ºåŠ›å›žé¿
5. **é€šä¿¡æš—å·åŒ–**: HTTPSé€šä¿¡ã®ç¢ºä¿

### 9.4 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹è€ƒæ…®äº‹é …
1. **ä¸¦åˆ—å‡¦ç†**: è¤‡æ•°åˆ†æžã®åŠ¹çŽ‡çš„ãªä¸¦è¡Œå®Ÿè¡Œ
2. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: åˆ†æžçµæžœã®é©åˆ‡ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†
3. **ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†**: ãƒ¡ãƒ¢ãƒªã¨CPUä½¿ç”¨é‡ã®æœ€é©åŒ–
4. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: åŠ¹çŽ‡çš„ãªã‚¯ã‚¨ãƒªã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ´»ç”¨
5. **APIæœ€é©åŒ–**: ãƒªã‚¯ã‚¨ã‚¹ãƒˆé »åº¦ã¨ãƒãƒƒãƒå‡¦ç†ã®æœ€é©åŒ–

### 9.5 LLMç‰¹æœ‰ã®æ³¨æ„ç‚¹
1. **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ**: åŠ¹æžœçš„ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°
2. **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç†**: ãƒˆãƒ¼ã‚¯ãƒ³åˆ¶é™å†…ã§ã®åŠ¹çŽ‡çš„ãªæƒ…å ±ä¼é”
3. **å‡ºåŠ›è§£æž**: LLMå‡ºåŠ›ã®æ§‹é€ åŒ–ã¨æ¤œè¨¼
4. **å“è³ªè©•ä¾¡**: åˆ†æžçµæžœã®å®¢è¦³çš„ãªå“è³ªè©•ä¾¡
5. **ãƒã‚¤ã‚¢ã‚¹å¯¾ç­–**: LLMã®æ½œåœ¨çš„ãƒã‚¤ã‚¢ã‚¹ã¸ã®å¯¾å¿œ

### 9.6 ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹é€£æºã®æ³¨æ„ç‚¹
1. **ãƒ«ãƒ¼ãƒ«æ•´åˆæ€§**: åˆ†æžçµæžœã¨ãƒ«ãƒ¼ãƒ«ã®æ•´åˆæ€§ç¢ºä¿
2. **ã‚·ã‚°ãƒŠãƒ«å“è³ª**: ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚·ã‚°ãƒŠãƒ«ã®ä¿¡é ¼æ€§ç®¡ç†
3. **ãƒªã‚¹ã‚¯ç®¡ç†**: åˆ†æžçµæžœã«åŸºã¥ããƒªã‚¹ã‚¯è©•ä¾¡
4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹è¿½è·¡**: åˆ†æžç²¾åº¦ã¨å–å¼•çµæžœã®ç›¸é–¢
5. **ç¶™ç¶šæ”¹å–„**: åˆ†æžçµæžœã«åŸºã¥ããƒ«ãƒ¼ãƒ«ã®æœ€é©åŒ–

### 9.7 ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®æ³¨æ„ç‚¹
1. **ç›£è¦–ç¶™ç¶šæ€§**: ç›£è¦–ãƒ„ãƒ¼ãƒ«ã®å®‰å®šç¨¼åƒç¢ºä¿
2. **ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š**: é©åˆ‡ãªã‚¢ãƒ©ãƒ¼ãƒˆé–¾å€¤ã®è¨­å®š
3. **ãƒ­ã‚°ç®¡ç†**: ç›£è¦–ãƒ­ã‚°ã®é©åˆ‡ãªç®¡ç†ã¨ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹**: ç›£è¦–ã«ã‚ˆã‚‹ã‚·ã‚¹ãƒ†ãƒ è² è·ã®æœ€å°åŒ–
5. **éšœå®³å¯¾å¿œ**: ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ è‡ªä½“ã®éšœå®³å¯¾å¿œ

---

## 10. ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ é‹ç”¨çŠ¶æ³

### 10.1 èµ·å‹•ä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹
1. **ãƒ‡ãƒ¼ã‚¿åŽé›†ãƒ‡ãƒ¼ãƒ¢ãƒ³** (`start_event_driven_system.py`)
   - 5åˆ†é–“éš”ã§ãƒ‡ãƒ¼ã‚¿åŽé›†
   - ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã§ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æžå®Ÿè¡Œ
   - ã‚·ãƒŠãƒªã‚ªä½œæˆã¨Discordé€šçŸ¥

2. **ç¶™ç¶šçš„ç›£è¦–ãƒ„ãƒ¼ãƒ«** (`continuous_monitor.py`)
   - 10ç§’é–“éš”ã§ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ã‚’ç›£è¦–
   - æ—¥æœ¬æ™‚é–“è¡¨ç¤ºã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
   - ãƒ‡ãƒ¼ã‚¿æ›´æ–°çŠ¶æ³ã®å¯è¦–åŒ–

### 10.2 ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ«ãƒ¼ãƒ«
- **pullback_buy**: æŠ¼ã—ç›®è²·ã„ï¼ˆRSI â‰¤ 40, ä¾¡æ ¼ > EMA200ï¼‰
- **reversal_sell**: é€†å¼µã‚Šå£²ã‚Šï¼ˆRSI â‰¥ 70, ä¾¡æ ¼ < EMA200ï¼‰
- **trend_follow_sell**: ä¸‹é™ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ•ã‚©ãƒ­ãƒ¼å£²ã‚Š
- **strong_downtrend_sell**: å¼·ã„ä¸‹é™ãƒˆãƒ¬ãƒ³ãƒ‰å£²ã‚Šï¼ˆRSI 25-40ï¼‰

### 10.3 ç›£è¦–å†…å®¹
- ðŸ“ˆ **ãƒ‡ãƒ¼ã‚¿åŽé›†çŠ¶æ³**: å„æ™‚é–“è¶³ã®æœ€æ–°ãƒ‡ãƒ¼ã‚¿æ™‚åˆ»
- ðŸ“¢ **ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†**: ãƒ‡ãƒ¼ã‚¿åŽé›†å®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†çŠ¶æ³
- ðŸ” **åˆ†æžçµæžœ**: ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æžã®å®Ÿè¡Œçµæžœ
- ðŸŽ¯ **ã‚·ãƒŠãƒªã‚ªçŠ¶æ³**: ä½œæˆã•ã‚ŒãŸã‚·ãƒŠãƒªã‚ªã®æƒ…å ±
- ðŸ’š **ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹**: å…¨ä½“çš„ãªã‚·ã‚¹ãƒ†ãƒ ã®å¥å…¨æ€§

### 10.4 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æŒ‡æ¨™
- **ãƒ‡ãƒ¼ã‚¿æ›´æ–°é »åº¦**: 5åˆ†é–“éš”
- **åˆ†æžå®Ÿè¡Œæ™‚é–“**: ç´„1-2ç§’
- **ã‚¹ã‚³ã‚¢è¨ˆç®—ç²¾åº¦**: 0-1ã®æ­£è¦åŒ–æ¸ˆã¿
- **ã‚·ã‚¹ãƒ†ãƒ å¯ç”¨æ€§**: 99.9%ä»¥ä¸Š
- **ãƒ‡ãƒ¼ã‚¿å“è³ªã‚¹ã‚³ã‚¢**: 1.00ï¼ˆå®Œç’§ï¼‰

---

**æ–‡æ›¸ç®¡ç†æƒ…å ±**

- æ–‡æ›¸ID: LLM-ANALYSIS-FUNCTIONAL-DOC-001
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³: v3.0
- ä½œæˆæ—¥: 2025-09-18
- æœ€çµ‚æ›´æ–°: 2025-09-18
- æ‰¿èªè€…: [ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆè€…]
- æ¬¡å›žãƒ¬ãƒ“ãƒ¥ãƒ¼äºˆå®š: 2025-10-18
